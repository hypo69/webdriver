## \file /src/utils/convertors/base64.py
# -*- coding: utf-8 -*-

#! .pyenv/bin/python3

"""
.. module:: src.utils.convertors.base64 
	:platform: Windows, Unix
	:synopsis: Convert Base64 encoded content to a temporary file

"""


""" This module provides a function to decode Base64 encoded content and write it to a temporary file with the specified extension.

Functions:
    - `base64_to_tmpfile`: Convert Base64 encoded content to a temporary file.
"""

import base64
import tempfile
import os

def base64_to_tmpfile(content: str, file_name: str) -> str:
    """
    Convert Base64 encoded content to a temporary file.

    This function decodes the Base64 encoded content and writes it to a temporary file with the same extension as the provided file name. 
    The path to the temporary file is returned.

    Args:
        content (str): Base64 encoded content to be decoded and written to the file.
        file_name (str): Name of the file used to extract the file extension for the temporary file.

    Returns:
        str: Path to the temporary file.

    Example:
        >>> base64_content = "SGVsbG8gd29ybGQh"  # Base64 encoded content "Hello world!"
        >>> file_name = "example.txt"
        >>> tmp_file_path = base64_to_tmpfile(base64_content, file_name)
        >>> print(f"Temporary file created at: {tmp_file_path}")
        Temporary file created at: /tmp/tmpfile.txt
    """
    _, ext = os.path.splitext(file_name)
    path = ''
    with tempfile.NamedTemporaryFile(delete=False, suffix=ext) as tmp:
        tmp.write(base64.b64decode(content))
        path = tmp.name

    return path

def base64encode(image_path):
    # Function to encode the image
  with open(image_path, "rb") as image_file:
    return base64.b64encode(image_file.read()).decode('utf-8')