# Модуль `scenario.py`

## Обзор

Модуль `scenario.py` предназначен для сбора информации о товарах со страниц категорий поставщика `amazon.com` с использованием веб-драйвера. Модуль содержит функции для извлечения списка категорий с сайта продавца и сбора списка товаров из этих категорий.

## Подробнее

Этот модуль играет важную роль в процессе сбора данных о товарах с сайта `amazon.com`. Он отвечает за навигацию по категориям и извлечение URL товаров, которые затем передаются для дальнейшей обработки и сохранения в базе данных.

Модуль включает следующие функциональные возможности:

-   Сбор списка категорий со страниц продавца (`get_list_categories_from_site()`).
-   Сбор списка товаров со страницы категории (`get_list_products_in_category()`).
-   Передача URL товаров в функцию `grab_product_page()` для обработки информации о товаре.

## Функции

### `get_list_products_in_category`

```python
def get_list_products_in_category(s) -> list[str,str,None]:
    """
    Возвращает список URL товаров со страницы категории.

    Args:
        s: Supplier - экземпляр класса Supplier.

    Returns:
        list[str,str,None]: Список URL товаров или None.
    """
```

**Назначение**: Извлекает список URL товаров из текущей категории, отображаемой в веб-драйвере.

**Параметры**:

-   `s`: Экземпляр класса `Supplier`, содержащий информацию о поставщике, включая настроенный веб-драйвер и локаторы для поиска элементов на странице.

**Возвращает**:

-   `list[str, str, None]`: Список URL товаров, найденных на странице категории. Возвращает `None`, если локаторы не определены или если не найдено ссылок на товары.

**Как работает функция**:

1.  **Проверка наличия локаторов**: Функция сначала проверяет, определены ли локаторы для категории (`s.locators['category']`). Если локаторы отсутствуют, функция логирует ошибку и возвращает `None`.
2.  **Прокрутка страницы**: Выполняется прокрутка страницы с помощью `d.scroll()`.
3.  **Извлечение ссылок на товары**: С помощью метода `d.execute_locator(l['product_links'])` извлекаются ссылки на товары.
4.  **Обработка полученных ссылок**: Если ссылки на товары не найдены, функция логирует предупреждение и возвращает `None`. Если найдена строка, она преобразуется в список.
5.  **Логирование количества найденных товаров**: Функция логирует количество найденных ссылок на товары.

**Примеры**:

```python
# Пример вызова функции
supplier_instance = Supplier(...)  # Необходимо создать экземпляр класса Supplier
product_links = get_list_products_in_category(supplier_instance)
if product_links:
    print(f"Найдено {len(product_links)} ссылок на товары.")
else:
    print("Не удалось получить ссылки на товары.")
```

ASCII-схема работы функции:

```
Проверка наличия локаторов
│
└──→ Локаторы отсутствуют → Логирование ошибки → Возврат None
│
Локаторы присутствуют
│
Прокрутка страницы
│
Извлечение ссылок на товары
│
└──→ Ссылки не найдены → Логирование предупреждения → Возврат None
│
Ссылки найдены
│
Преобразование ссылки в список (если строка)
│
Логирование количества найденных товаров
│
Возврат списка URL товаров