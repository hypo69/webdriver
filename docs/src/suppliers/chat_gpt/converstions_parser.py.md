# Модуль `converstions_parser`

## Обзор

Модуль предназначен для извлечения бесед (conversations) из HTML-файлов, сгенерированных ChatGPT. Основная функциональность заключается в парсинге HTML-файла и выделении всех элементов `<div class="conversation">`, которые представляют собой отдельные беседы.

## Подробней

Этот модуль используется для автоматической обработки и анализа истории переписок с ChatGPT, сохраненных в формате HTML. Он облегчает извлечение структурированных данных из HTML-файлов, что позволяет дальнейшее использование этих данных для различных целей, таких как анализ тональности, выявление ключевых тем и т.д. Модуль использует библиотеку `BeautifulSoup` для парсинга HTML.

## Функции

### `extract_conversations_from_html`

```python
def extract_conversations_from_html(file_path: Path):
    """Генератор, который читает один .html файл и извлекает все <div class="conversation">.

    :param file_path: Путь к .html файлу.
    """
    ...
```

**Назначение**: Извлекает все блоки `<div class="conversation">` из HTML-файла, представляющие собой отдельные беседы. Функция является генератором, что позволяет обрабатывать большие файлы, не загружая их целиком в память.

**Параметры**:
- `file_path` (Path): Путь к HTML-файлу, из которого нужно извлечь беседы.

**Возвращает**:
- Генератор, который последовательно возвращает объекты `BeautifulSoup` для каждого найденного блока `<div class="conversation">`.

**Как работает функция**:

1. **Открытие файла**: Открывает HTML-файл по указанному пути в кодировке UTF-8.
2. **Парсинг HTML**: Использует `BeautifulSoup` для парсинга содержимого файла.
3. **Поиск элементов**: Находит все элементы `<div class="conversation">` в распарсенном HTML.
4. **Генерация результатов**: Возвращает каждый найденный элемент как объект `BeautifulSoup` с использованием `yield`, что делает функцию генератором.

**ASCII Flowchart**:

```
A: Открытие файла
|
B: Парсинг HTML (BeautifulSoup)
|
C: Поиск <div class="conversation">
|
D: Итерация по найденным элементам
|
E: Возврат каждого элемента (yield)
```

**Примеры**:

```python
from pathlib import Path
from src import gs  # предполагается, что gs - это модуль с определенными путями

file_path = Path(gs.path.data / 'chat_gpt'  / 'chat.html')
for conversation in extract_conversations_from_html(file_path):
    print(conversation.prettify())  # Печатает содержимое каждой найденной беседы
```

Этот пример показывает, как использовать функцию для извлечения и печати содержимого каждой беседы из HTML-файла. Путь к файлу берется из модуля `gs`, предполагается, что там хранятся пути к директориям проекта.