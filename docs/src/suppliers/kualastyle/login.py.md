# Модуль `login.py`

## Обзор

Модуль `login.py` содержит функции для авторизации поставщика Kualastyle и закрытия всплывающих окон. Он использует модуль `logger` для логирования событий и исключений. Основная задача модуля - обеспечить успешный вход пользователя на сайт поставщика.

## Подробней

Модуль предназначен для автоматизации процесса входа на сайт Kualastyle. Он включает функции для открытия сайта, фокусировки на окне браузера, ожидания загрузки страницы и закрытия всплывающих окон, которые могут мешать процессу авторизации. Он использует драйвер веб-браузера для взаимодействия с сайтом и локаторы для поиска элементов на странице. Расположение файла в проекте указывает на его принадлежность к функциональности, связанной с поставщиками (suppliers), в частности, с поставщиком Kualastyle.

## Функции

### `login`

```python
def login(s) -> bool:
    """ Функция логин. 
   @param
        s - Supplier
    @returns
        True if login else False

   """
    ...
```

**Назначение**:
Выполняет вход пользователя на сайт поставщика. Включает в себя закрытие всплывающих окон и возвращает результат входа.

**Параметры**:
- `s` (Supplier): Объект, представляющий поставщика, содержащий информацию о драйвере и локаторах.

**Возвращает**:
- `bool`: `True`, если вход выполнен успешно, иначе `False`.

**Как работает функция**:

1. Вызывает функцию `close_pop_up(s)` для закрытия всплывающих окон.
2. Возвращает `True`, предполагая, что вход выполнен успешно.

```
login
↓
close_pop_up
↓
return True
```

**Примеры**:

```python
from unittest.mock import MagicMock

# Создаем мок-объект поставщика
supplier_mock = MagicMock()

# Вызываем функцию login с мок-объектом
result = login(supplier_mock)
print(result)  # Вывод: True
```

### `close_pop_up`

```python
def close_pop_up(s) -> bool:
    """ Функция логин
   @param
        s - Supplier
    @returns
        True if login else False

   """
    ...
```

**Назначение**:
Закрывает всплывающее окно на сайте поставщика, если оно присутствует.

**Параметры**:
- `s` (Supplier): Объект, представляющий поставщика, содержащий информацию о драйвере и локаторах.

**Возвращает**:
- `bool`: `True`, если всплывающее окно успешно закрыто, иначе `False`.

**Как работает функция**:

1. Извлекает драйвер (`_d`) и локатор (`_l`) для закрытия всплывающего окна из объекта поставщика (`s`).
2. Открывает URL (`https://www.kualastyle.com`) в браузере.
3. Переводит фокус на окно браузера.
4. Ожидает 5 секунд.
5. Пытается выполнить локатор (`_l`) для закрытия всплывающего окна.
6. Если возникает исключение, логирует предупреждение.

```
close_pop_up
↓
Извлечение драйвера и локатора
↓
Открытие URL
↓
Фокус на окне
↓
Ожидание
↓
Попытка закрытия всплывающего окна
↓
Обработка исключения
```

**Примеры**:

```python
from unittest.mock import MagicMock

# Создаем мок-объект поставщика
supplier_mock = MagicMock()
supplier_mock.driver = MagicMock()
supplier_mock.locators = {'close_pop_up_locator': {'by': 'XPATH', 'selector': '//button[@id = "closeXButton"]'}}

# Вызываем функцию close_pop_up с мок-объектом
result = close_pop_up(supplier_mock)
# В данном случае функция ничего не возвращает явно, но можно проверить, что методы драйвера были вызваны
supplier_mock.driver.get_url.assert_called_with('https://www.kualastyle.com')
supplier_mock.driver.window_focus.assert_called_with(supplier_mock.driver)
supplier_mock.driver.wait.assert_called_with(5)