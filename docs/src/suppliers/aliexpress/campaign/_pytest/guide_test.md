# Руководство для Тестера

## Обзор

Этот документ предназначен для тестеров, которые будут проверять модуль, отвечающий за подготовку материалов для рекламных кампаний на платформе AliExpress. Модуль включает в себя три основных файла: `edit_campaign.py`, `prepare_campaigns.py` и `test_campaign_integration.py`.

## Подробнее

В данном руководстве описаны основные файлы модуля, инструкции по тестированию и проверке функциональности. Оно поможет тестерам убедиться, что все компоненты модуля работают корректно и взаимодействуют друг с другом без ошибок.

## Файлы модуля

1.  `edit_campaign.py`: Управление рекламной кампанией.
2.  `prepare_campaigns.py`: Подготовка и обработка категорий кампании.
3.  `test_campaign_integration.py`: Тесты для проверки интеграции всех компонентов модуля.

## Основные файлы

### `edit_campaign.py`

**Описание**: Этот файл содержит класс `AliCampaignEditor`, который наследует от `AliPromoCampaign`. Основная задача этого класса - управление рекламной кампанией.

**Основные функции**:

*   `AliCampaignEditor`: Инициализация и управление кампанией.

### `prepare_campaigns.py`

**Описание**: Этот файл содержит функции для подготовки материалов кампании, включая обновление категорий и обработку кампаний по категориям.

**Основные функции**:

*   `update_category`: Обновление категории в JSON файле.
*   `process_campaign_category`: Обработка конкретной категории в рамках кампании.
*   `process_campaign`: Обработка всей кампании по всем категориям.
*   `main`: Асинхронная основная функция для обработки кампании.

### `test_campaign_integration.py`

**Описание**: Этот файл содержит тесты, проверяющие взаимодействие всех компонентов модуля.

**Основные тесты**:

*   `test_update_category_success`: Проверка успешного обновления категории.
*   `test_update_category_failure`: Проверка обработки ошибки при обновлении категории.
*   `test_process_campaign_category_success`: Проверка успешной обработки категории.
*   `test_process_campaign_category_failure`: Проверка обработки ошибки при обработке категории.
*   `test_process_campaign`: Проверка обработки всех категорий в кампании.
*   `test_main`: Проверка основного сценария выполнения кампании.

## Инструкции по тестированию

1.  **Установка зависимостей**:
    *   Убедитесь, что все необходимые зависимости установлены. Выполните команду:

    ```sh
    pip install -r requirements.txt
    ```

2.  **Запуск тестов**:
    *   Для запуска всех тестов используйте команду:

    ```sh
    pytest test_campaign_integration.py
    ```

3.  **Проверка тестов**:
    *   Убедитесь, что все тесты проходят успешно. В выводе команды `pytest` должно быть указано, что все тесты пройдены (`PASSED`).

## Проверка функциональности

1.  **Проверка успешного обновления категории**:
    *   Тест `test_update_category_success` проверяет, что категория успешно обновляется в JSON файле.
    *   Убедитесь, что функция `update_category` правильно обновляет данные категории и логгирует успешное выполнение.

2.  **Проверка обработки ошибки при обновлении категории**:
    *   Тест `test_update_category_failure` проверяет обработку ошибки при обновлении категории.
    *   Убедитесь, что при возникновении ошибки функция логгирует сообщение об ошибке и возвращает `False`.

3.  **Проверка успешной обработки категории**:
    *   Тест `test_process_campaign_category_success` проверяет успешную обработку категории в кампании.
    *   Убедитесь, что функция `process_campaign_category` корректно обрабатывает категорию и возвращает результат без ошибок.

4.  **Проверка обработки ошибки при обработке категории**:
    *   Тест `test_process_campaign_category_failure` проверяет обработку ошибки при обработке категории.
    *   Убедитесь, что при возникновении ошибки функция логгирует сообщение об ошибке и возвращает `None`.

5.  **Проверка обработки всех категорий в кампании**:
    *   Тест `test_process_campaign` проверяет обработку всех категорий в кампании.
    *   Убедитесь, что функция `process_campaign` корректно обрабатывает все категории и возвращает результаты обработки каждой категории.

6.  **Проверка основного сценария выполнения кампании**:
    *   Тест `test_main` проверяет основной сценарий выполнения кампании.
    *   Убедитесь, что функция `main` корректно выполняет все этапы обработки кампании асинхронно и без ошибок.

## Заключение

Убедитесь, что все тесты пройдены и функциональность модуля работает корректно. В случае возникновения проблем или ошибок, сообщите разработчикам для исправления.