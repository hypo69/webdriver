# Модуль `ide_experiments_fields.py`

## Обзор

Модуль предназначен для извлечения и обработки данных о товарах с сайта поставщика HB (hbdeadsea.co.il) с целью их последующего добавления или обновления в PrestaShop. Он включает в себя функции для парсинга веб-страниц товаров, нормализации данных и взаимодействия с API PrestaShop.
Модуль использует Selenium для навигации по сайту и извлечения данных, а также содержит функции для обработки и форматирования полученных значений.

## Подробней

Модуль выполняет следующие основные задачи:

1.  **Сбор данных о товаре**: Извлекает информацию о товаре с веб-страницы поставщика, используя Selenium и локаторы, определенные для данного поставщика.
2.  **Нормализация данных**: Приводит извлеченные данные к нужному формату, используя функции нормализации строк и цен.
3.  **Взаимодействие с API PrestaShop**: Добавляет или обновляет информацию о товаре в PrestaShop, используя API.
4.  **Обработка изображений**: Загружает изображения товаров и передает их через FTP.

Модуль предназначен для работы в контексте проекта `hypotez` и использует общие компоненты и настройки проекта, такие как:

*   Настройки поставщика (Supplier).
*   Объект товара (Product, ProductFields).
*   Веб-драйвер (Driver).
*   Логгер (logger).

## Классы

### `ProductFields`

**Описание**: Класс, представляющий поля товара.

**Аттрибуты**:

*   `s (Supplier)`: Объект поставщика, содержащий информацию о поставщике и его настройках.

### `Supplier`

**Описание**: Класс, представляющий поставщика.

**Аттрибуты**:

*   `supplier_prefix (str)`: Префикс поставщика.

### `Product`

**Описание**: Класс, представляющий товар.

**Аттрибуты**:

*   `s (Supplier)`: Объект поставщика, содержащий информацию о поставщике и его настройках.

## Функции

### `grab_product_page`

```python
def grab_product_page(supplier: Supplier, async_run: bool = True) -> ProductFields:
    """ Собираю со страницы товара значения вебэлементов и привожу их к полям ProductFields

    Args:
        supplier (Supplier): класс поставщика
             - вебдрайвер должен быть установлен на странице товара.
            - в моей учетной записи я вижу линейку "Affiliate links" - я беру из нее информацию о партнерской ссылке
             на али работает AJAX, это важно для сбора комбинаций! Они не передаются по URL
        async_run (bool):  По умолчанию True.

    Returns:
        ProductFields: Объект, содержащий поля товара.
    """
```

**Назначение**: Извлекает данные о товаре со страницы и преобразует их в объект `ProductFields`.

**Параметры**:

*   `supplier (Supplier)`: Объект поставщика.
*   `async_run (bool)`: Флаг для асинхронного запуска.

**Возвращает**:

*   `ProductFields`: Объект с данными о товаре.

**Как работает функция**:

1.  Инициализирует глобальные переменные `s`, `p`, `f`, `d`, `l` на основе входного параметра `supplier`.
2.  Закрывает баннер на странице, если он есть.
3.  Прокручивает страницу для загрузки AJAX-контента.
4.  Вызывает внутренние функции для извлечения конкретных полей товара.
5.  Возвращает объект `ProductFields` с заполненными данными.

```
    Начало
    |
    --> Инициализация переменных (s, p, f, d, l)
    |
    --> Закрытие баннера (d.execute_locator(l["close_banner"]))
    |
    --> Прокрутка страницы (d.scroll())
    |
    --> Вызов функций для извлечения полей товара
    |   |
    |   --> product_reference_and_volume_and_price_for_100()
    |   --> set_references(f, s)
    |   --> field_additional_shipping_cost()
    |   --> field_affiliate_short_link()
    |   --> field_available_for_order()
    |   --> field_condition()
    |   --> Извлечение изображений
    |   --> field_description()
    |   --> field_how_to_use()
    |   --> field_id_category_default()
    |   --> field_id_manufacturer()
    |   --> Имя и ссылка товара
    |   --> field_on_sale()
    |   --> field_price()
    |   --> field_ingredients()
    |   --> field_visibility()
    |
    --> Возврат ProductFields
    |
    Конец
```

**Внутренние функции**:

#### `product_reference_and_volume_and_price_for_100`

```python
def product_reference_and_volume_and_price_for_100():
    """  Функция вытаскивает 3 поля:
        - volume,
        - supplier_reference,
        - цена за единицу товара
        @todo Реализовать поле `цена за единицу товара`"""
```

**Назначение**: Извлекает объем, артикул поставщика и цену за 100 мл.

**Как работает функция**:

1.  Получает список веб-элементов с информацией о товаре.
2.  Итерируется по элементам и извлекает объем, цену за единицу товара и артикул поставщика.
3.  Заполняет соответствующие поля в объекте `f` (ProductFields).

#### `set_references`

```python
def set_references(f: ProductFields, s: Supplier):
    """ все, что касается id товара """
```

**Назначение**: Устанавливает идентификаторы товара.

**Параметры**:

*   `f (ProductFields)`: Объект с данными о товаре.
*   `s (Supplier)`: Объект поставщика.

**Как работает функция**:

1.  Устанавливает `id_supplier` из `s.supplier_id`.
2.  Формирует `reference` как комбинацию `s.supplier_id` и `f.supplier_reference`.

**Примеры**:

```python
# Пример вызова функции grab_product_page
supplier = Supplier(supplier_prefix='hb')
product_fields = grab_product_page(supplier)
print(product_fields)
```

### `field_additional_shipping_cost`

```python
def field_additional_shipping_cost():
    """
    стоимость доставки
    @details
    """
    return d.execute_locator(l["additional_shipping_cost"])
```

**Назначение**: Извлекает стоимость доставки товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Стоимость доставки, полученная из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения стоимости доставки с веб-страницы.
2.  Возвращает полученное значение.

### `field_delivery_in_stock`

```python
def field_delivery_in_stock():
    """
    Доставка, когда товар в наличии
    @details
    """
    return str(d.execute_locator(l["delivery_in_stock"]))
    ...
```

**Назначение**: Извлекает информацию о доставке, когда товар в наличии.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Строковое значение информации о доставке.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения информации о доставке с веб-страницы.
2.  Преобразует полученное значение в строку и возвращает его.

### `field_active`

```python
def field_active():
    """

    @details
    """
    return f.active # <-  поставить в зависимость от delivery_out_stock
    ...
```

**Назначение**: Определяет, активен ли товар.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.active`.

**Как работает функция**:
1.  Возвращает значение атрибута `active` объекта `f`.
    *   Значение активности товара может быть связано с информацией о доставке (`delivery_out_stock`).

### `field_additional_delivery_times`

```python
def field_additional_delivery_times():
    """

    @details
    """
    return d.execute_locator(l["additional_delivery_times"])
    ...
```

**Назначение**: Извлекает дополнительное время доставки товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение дополнительного времени доставки, полученное из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения информации о дополнительном времени доставки с веб-страницы.
2.  Возвращает полученное значение.

### `field_advanced_stock_management`

```python
def field_advanced_stock_management():
    """

    @details
    """
    return f.advanced_stock_management
    ...
```

**Назначение**: Возвращает значение расширенного управления запасами.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.advanced_stock_management`.

**Как работает функция**:
1.  Возвращает значение атрибута `advanced_stock_management` объекта `f`.

### `field_affiliate_short_link`

```python
def field_affiliate_short_link():
    """

    @details
    """
    return d.current_url
    ...
```

**Назначение**: Возвращает текущий URL страницы.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Текущий URL страницы.

**Как работает функция**:
1.  Возвращает значение `d.current_url`, представляющее текущий URL страницы, на которой находится веб-драйвер.

### `field_affiliate_summary`

```python
def field_affiliate_summary():
    """

    @details
    """
    return f.affiliate_summary
    ...
```

**Назначение**: Возвращает сводку партнерской программы.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.affiliate_summary`.

**Как работает функция**:
1.  Возвращает значение атрибута `affiliate_summary` объекта `f`.

### `field_affiliate_summary_2`

```python
def field_affiliate_summary_2():
    """

    @details
    """
    return f.affiliate_summary_2
    ...
```

**Назначение**: Возвращает дополнительную сводку партнерской программы.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.affiliate_summary_2`.

**Как работает функция**:
1.  Возвращает значение атрибута `affiliate_summary_2` объекта `f`.

### `field_affiliate_text`

```python
def field_affiliate_text():
    """

    @details
    """
    return f.affiliate_text
    ...
```

**Назначение**: Возвращает текст партнерской программы.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.affiliate_text`.

**Как работает функция**:
1.  Возвращает значение атрибута `affiliate_text` объекта `f`.

### `field_affiliate_image_large`

```python
def field_affiliate_image_large():
    """

    @details
    """
    ...
```

**Назначение**: Извлекает URL большого изображения партнерской программы.

**Параметры**:
*   Отсутствуют.

**Как работает функция**:
*   Функция пока не реализована (`...`).

### `field_affiliate_image_medium`

```python
def field_affiliate_image_medium():
    """

    @details
    """
    ...
```

**Назначение**: Извлекает URL среднего изображения партнерской программы.

**Параметры**:
*   Отсутствуют.

**Как работает функция**:
*   Функция пока не реализована (`...`).

### `field_affiliate_image_small`

```python
def field_affiliate_image_small():
    """

    @details
    """
    return d.execute_locator(l["affiliate_image_small"])
```

**Назначение**: Извлекает URL маленького изображения партнерской программы.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   URL маленького изображения партнерской программы, полученный из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения URL маленького изображения партнерской программы с веб-страницы.
2.  Возвращает полученное значение.

### `field_available_date`

```python
def field_available_date():
    """

    @details
    """
    return f.available_date
    ...
```

**Назначение**: Возвращает дату доступности товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.available_date`.

**Как работает функция**:
1.  Возвращает значение атрибута `available_date` объекта `f`.

### `field_available_for_order`

```python
def field_available_for_order():
    """ Если вернулся вебэлемент, это флаг, что товара нет в наличии, а вернулся <p>המלאי אזל
    """
    available_for_order = d.execute_locator(l["available_for_order"])
    ...
    if available_for_order is None:
        f.available_for_order = 1
    else:
        f.available_for_order = 0
        f.active = 0
    ...
```

**Назначение**: Определяет, доступен ли товар для заказа.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   1, если товар доступен для заказа, 0 - если нет.

**Как работает функция**:

1.  Извлекает веб-элемент, указывающий на доступность товара.
2.  Если элемент не найден (`None`), устанавливает `f.available_for_order = 1`.
3.  Если элемент найден, устанавливает `f.available_for_order = 0` и `f.active = 0`.

### `field_available_later`

```python
def field_available_later():
    """

    @details
    """
    return f.available_later
    ...
```

**Назначение**: Возвращает сообщение о доступности товара позже.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.available_later`.

**Как работает функция**:
1.  Возвращает значение атрибута `available_later` объекта `f`.

### `field_available_now`

```python
def field_available_now():
    """

    @details
    """
    return f.available_now
    ...
```

**Назначение**: Возвращает сообщение о доступности товара сейчас.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.available_now`.

**Как работает функция**:
1.  Возвращает значение атрибута `available_now` объекта `f`.

### `field_category_ids`

```python
def field_category_ids():
    """

    @details
    """
    return f.category_ids
    ...
```

**Назначение**: Возвращает идентификаторы категорий товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.category_ids`.

**Как работает функция**:
1.  Возвращает значение атрибута `category_ids` объекта `f`.

### `field_category_ids_append`

```python
def field_category_ids_append():
    """

    @details
    """
    #return f.category_ids_append
    ...
```

**Назначение**: Определяет добавочные категории товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Функция пока не возвращает значение (`...`).

**Как работает функция**:

1.  В текущей реализации функция не возвращает значение и не выполняет никаких действий, кроме указания на пропуск (`...`).

### `field_cache_default_attribute`

```python
def field_cache_default_attribute():
    """

    @details
    """
    return f.cache_default_attribute
    ...
```

**Назначение**: Возвращает атрибут кэша по умолчанию.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.cache_default_attribute`.

**Как работает функция**:
1.  Возвращает значение атрибута `cache_default_attribute` объекта `f`.

### `field_cache_has_attachments`

```python
def field_cache_has_attachments():
    """

    @details
    """
    return f.cache_has_attachments
    ...
```

**Назначение**: Возвращает флаг, указывающий, есть ли в кэше вложения.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.cache_has_attachments`.

**Как работает функция**:
1.  Возвращает значение атрибута `cache_has_attachments` объекта `f`.

### `field_cache_is_pack`

```python
def field_cache_is_pack():
    """

    @details
    """
    return f.cache_is_pack
    ...
```

**Назначение**: Возвращает флаг, указывающий, является ли товар набором (pack).

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.cache_is_pack`.

**Как работает функция**:
1.  Возвращает значение атрибута `cache_is_pack` объекта `f`.

### `field_condition`

```python
def field_condition():
    """

    @details
    """
    return d.execute_locator(l.condition)
```

**Назначение**: Извлекает условие товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Условие товара, полученное из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения условия товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_customizable`

```python
def field_customizable():
    """

    @details
    """
    return f.customizable
    ...
```

**Назначение**: Возвращает флаг, указывающий, можно ли настраивать товар.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.customizable`.

**Как работает функция**:
1.  Возвращает значение атрибута `customizable` объекта `f`.

### `field_date_add`

```python
def field_date_add():
    """

    @details
    """
    return f.date_add
    ...
```

**Назначение**: Возвращает дату добавления товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.date_add`.

**Как работает функция**:
1.  Возвращает значение атрибута `date_add` объекта `f`.

### `field_date_upd`

```python
def field_date_upd():
    """

    @details
    """
    return f.date_upd
    ...
```

**Назначение**: Возвращает дату обновления товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.date_upd`.

**Как работает функция**:
1.  Возвращает значение атрибута `date_upd` объекта `f`.

### `field_depth`

```python
def field_depth():
    """
    @details
    """
    return d.execute_locator ( l ["depth"] )
    ...
```

**Назначение**: Извлекает глубину (размер) товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Глубина товара, полученная из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения глубины товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_description`

```python
def field_description():
    """ поле полного описания товара
    @details
    """
    return d.execute_locator (l["description"] )[0].text
    ...
```

**Назначение**: Извлекает полное описание товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Полное описание товара, полученное из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения полного описания товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_id_category_default`

```python
def field_id_category_default():
    """
    @details
    """
    return s.current_scenario["presta_categories"]["default_category"]
    ...
```

**Назначение**: Возвращает идентификатор категории товара по умолчанию.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Идентификатор категории товара по умолчанию из сценария.

**Как работает функция**:
1.  Возвращает значение `s.current_scenario["presta_categories"]["default_category"]`, представляющее идентификатор категории товара по умолчанию, взятый из текущего сценария.

### `field_ean13`

```python
def field_ean13():
    """

    @details
    """
    return d.execute_locator ( l ["ean13"] )
    ...
```

**Назначение**: Извлекает EAN13 код товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   EAN13 код товара, полученный из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения EAN13 кода товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_ecotax`

```python
def field_ecotax():
    """

    @details
    """
    return f.ecotax
    ...
```

**Назначение**: Возвращает значение ecotax для товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.ecotax`.

**Как работает функция**:
1.  Возвращает значение атрибута `ecotax` объекта `f`.

### `field_height`

```python
def field_height():
    """

    @details
    """
    return d.execute_locator ( l ["height"] )
    ...
```

**Назначение**: Извлекает высоту товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Высота товара, полученная из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения высоты товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_how_to_use`

```python
def field_how_to_use():
    """

    @details
    """
    return d.execute_locator ( l ["how_to_use"] ) [0].text
    ...
```

**Назначение**: Извлекает инструкцию по применению товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Инструкция по применению товара, полученная из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения инструкции по применению товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_id_default_combination`

```python
def field_id_default_combination():
    """

    @details
    """
    return f.id_default_combination
    ...
```

**Назначение**: Возвращает идентификатор комбинации по умолчанию.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_default_combination`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_default_combination` объекта `f`.

### `field_id_default_image`

```python
def field_id_default_image():
    """

    @details
    """
    return f.id_default_image
    ...
```

**Назначение**: Возвращает идентификатор изображения по умолчанию.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_default_image`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_default_image` объекта `f`.

### `field_id_lang`

```python
def field_id_lang():
    """

    @details
    """
    return f.id_lang
    ...
```

**Назначение**: Возвращает идентификатор языка.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_lang`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_lang` объекта `f`.

### `field_id_manufacturer`

```python
def field_id_manufacturer():
    """ ID бренда. Может быть и названием бренда - престашоп сам разберется """

    return d.execute_locator(l["id_manufacturer"])
    ...
```

**Назначение**: Извлекает идентификатор производителя товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Идентификатор производителя товара, полученный из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения идентификатора производителя товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_id_product`

```python
def field_id_product():
    """

    @details
    """
    return f.id_product
    ...
```

**Назначение**: Возвращает идентификатор товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_product`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_product` объекта `f`.

### `field_id_shop_default`

```python
def field_id_shop_default():
    """

    @details
    """
    return f.id_shop_default
    ...
```

**Назначение**: Возвращает идентификатор магазина по умолчанию.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_shop_default`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_shop_default` объекта `f`.

### `field_id_supplier`

```python
def field_id_supplier():
    """

    @details
    """
    return d.execute_locator(l["id_supplier"])
    ...
```

**Назначение**: Извлекает идентификатор поставщика товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Идентификатор поставщика товара, полученный из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения идентификатора поставщика товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_id_tax`

```python
def field_id_tax():
    """

    @details
    """
    return f.id_tax
    ...
```

**Назначение**: Возвращает идентификатор налога.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_tax`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_tax` объекта `f`.

### `field_id_type_redirected`

```python
def field_id_type_redirected():
    """

    @details
    """
    return f.id_type_redirected
    ...
```

**Назначение**: Возвращает идентификатор типа переадресации.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.id_type_redirected`.

**Как работает функция**:
1.  Возвращает значение атрибута `id_type_redirected` объекта `f`.

### `field_images_urls`

```python
def field_images_urls():
    """
    Вначале я загружу дефолтную картинку
    @details
    """
    return d.execute_locator(l["additional_images_urls"])
    ...
```

**Назначение**: Извлекает URL дополнительных изображений товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Список URL дополнительных изображений товара, полученных из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения URL дополнительных изображений товара с веб-страницы.
2.  Возвращает полученные значения.

### `field_indexed`

```python
def field_indexed():
    """

    @details
    """
    return f.indexed
    ...
```

**Назначение**: Возвращает флаг, указывающий, проиндексирован ли товар.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.indexed`.

**Как работает функция**:
1.  Возвращает значение атрибута `indexed` объекта `f`.

### `field_ingredients`

```python
def field_ingredients():
    """ Состав. Забираю с сайта HTML с картинками ингридиентов """

    return d.execute_locator ( l["ingredients"] )[0].text
    ...
```

**Назначение**: Извлекает состав товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Состав товара, полученный из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения состава товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_meta_description`

```python
def field_meta_description():
    """

    @details
    """
    d.execute_locator ( l['meta_description'] )
    ...
```

**Назначение**: Извлекает мета-описание товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Функция не возвращает значение (`...`).

**Как работает функция**:
1.  Извлекает мета-описание товара с веб-страницы с помощью `d.execute_locator`, но не возвращает его.

### `field_meta_keywords`

```python
def field_meta_keywords():
    """

    @details
    """
    return d.execute_locator ( l['meta_keywords'] )
    ...
```

**Назначение**: Извлекает мета-ключевые слова товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Мета-ключевые слова товара, полученные из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения мета-ключевых слов товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_meta_title`

```python
def field_meta_title():
    """

    @details
    """
    return d.execute_locator ( l['meta_title'] )
    ...
```

**Назначение**: Извлекает мета-заголовок товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Мета-заголовок товара, полученный из локатора.

**Как работает функция**:
1.  Использует `d.execute_locator` для получения мета-заголовка товара с веб-страницы.
2.  Возвращает полученное значение.

### `field_is_virtual`

```python
def field_is_virtual():
    """

    @details
    """
    return f.is_virtual
    ...
```

**Назначение**: Возвращает флаг, указывающий, является ли товар виртуальным.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.is_virtual`.

**Как работает функция**:
1.  Возвращает значение атрибута `is_virtual` объекта `f`.

### `field_isbn`

```python
def field_isbn():
    """

    @details
    """
    return f.isbn
    ...
```

**Назначение**: Возвращает ISBN код товара.

**Параметры**:
*   Отсутствуют.

**Возвращает**:
*   Значение `f.isbn`.

**Как работает функция**:
1.  Возвращает значение атрибута `isbn` объекта `f`.

### `field_link_rewrite`

```python
def field_link_rewrite(product_name: str) -> str:
    """ Создается из переменной `product_name` которая содержит значение локатора l["name"] """

    return StringNormalizer.normalize_link_rewrite ( product_name )
    ...
```

**Назначение**: Создает link_rewrite для товара на основе названия товара.

**Параметры**:
*   `product_name (str)`: Название товара.

**Возвращает**: