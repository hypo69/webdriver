# Модуль `external_client`

## Обзор

Модуль `external_client` представляет собой пример XML-RPC клиента для управления сервером Fast API из внешнего кода. Он позволяет запускать, останавливать серверы, добавлять новые маршруты и получать информацию о статусе серверов через RPC.

## Подробнее

Этот модуль предоставляет пример использования XML-RPC для взаимодействия с сервером Fast API. Он демонстрирует, как можно удаленно управлять сервером, добавлять новые маршруты и получать информацию о его состоянии. Модуль предназначен для использования в качестве примера и может быть адаптирован для конкретных потребностей управления сервером Fast API из внешних приложений.

## Функции

### `main`

```python
def main():
    """Основная функция для управления сервером через RPC из внешнего кода."""
```

**Как работает функция**:
Функция `main` является основной точкой входа для управления сервером Fast API через XML-RPC. Она создает экземпляр `ServerProxy` для взаимодействия с RPC-сервером, расположенным по адресу `http://localhost:9000`. Затем она выполняет последовательность операций, таких как запуск сервера на порту 8001, добавление нового маршрута `/test_route`, получение статуса серверов и остановка сервера на порту 8001. В случае возникновения ошибки выводит сообщение об ошибке. В конце работы выполняет завершение работы RPC-сервера.

   - Создает экземпляр `ServerProxy` для связи с сервером по адресу "http://localhost:9000".
   - Запускает сервер на порту 8001 с помощью `rpc_client.start_server(8001, "127.0.0.1")`.
   - Добавляет новый маршрут `/test_route` с помощью `rpc_client.add_new_route("/test_route", 'lambda: {"message": "Hello from test_route"}', ["GET"])`.
   - Получает статус серверов с помощью `rpc_client.status_servers()`.
   - Останавливает сервер на порту 8001 с помощью `rpc_client.stop_server(8001)`.
   - Выводит сообщение об ошибке, если возникает исключение.
   - Завершает работу RPC-сервера с помощью `rpc_client.shutdown()`.

**Параметры**:
- Нет

**Возвращает**:
- Нет

**Вызывает исключения**:
- `Exception`: Если возникает ошибка при выполнении RPC-вызовов.

**Примеры**:

```python
if __name__ == "__main__":
    main()
```