# Модуль подсчета строк в файлах

## Обзор

Модуль предназначен для рекурсивного подсчета количества строк в текстовых файлах, а также количества классов и функций в указанной директории и ее поддиректориях.

## Подробней

Этот модуль предоставляет функциональность для анализа кода в директории, подсчитывая общее количество строк в текстовых файлах, а также количество классов и функций. Он используется для получения общей картины о размере и структуре кодовой базы проекта. Модуль рекурсивно проходит по всем поддиректориям, исключая бинарные файлы и файлы из определенных папок, таких как `__pycache__` и `firefox_profiles`.

## Функции

### `count_lines_in_files`

```python
def count_lines_in_files(directory: str) -> tuple[int, int, int]:
    """
    Рекурсивно подсчитывает количество строк в текстовых файлах в указанной директории и ее поддиректориях, а также количество классов и функций.

    Args:
        directory (str): Путь к директории

    Returns:
        tuple[int, int, int]: Общее количество строк в текстовых файлах, количество классов и количество функций
    """
```

**Как работает функция**:

Функция `count_lines_in_files` рекурсивно проходит по указанной директории и ее поддиректориям. Для каждого файла проверяется, является ли он текстовым (не бинарным) и не находится ли он в исключенных директориях (`__pycache__` или `firefox_profiles`). Если файл удовлетворяет условиям, подсчитывается количество строк в файле, а также количество классов и функций. Результаты суммируются и возвращаются в виде кортежа.

**Параметры**:

- `directory` (str): Путь к директории, в которой необходимо выполнить подсчет.

**Возвращает**:

- `tuple[int, int, int]`: Кортеж, содержащий общее количество строк в текстовых файлах, количество классов и количество функций.

**Примеры**:

```python
directory = 'src'
total_lines, total_classes, total_functions = count_lines_in_files(directory)
print(f"Всего строк в текстовых файлах в '{directory}': {total_lines}")
print(f"Всего классов: {total_classes}")
print(f"Всего функций: {total_functions}")
```

### `is_binary`

```python
def is_binary(filepath: str) -> bool:
    """
    Проверяет, является ли файл бинарным.

    Args:
        filepath (str): Путь к файлу

    Returns:
        bool: True, если файл бинарный, иначе False
    """
```

**Как работает функция**:

Функция `is_binary` пытается открыть файл в бинарном режиме (`'rb'`) и прочитать первые 512 байт. Если в прочитанном блоке обнаруживается нулевой байт (`b'\\0'`), файл считается бинарным и возвращается `True`. Если при чтении файла возникает исключение, файл также считается бинарным и возвращается `True`.

**Параметры**:

- `filepath` (str): Путь к файлу, который необходимо проверить.

**Возвращает**:

- `bool`: `True`, если файл является бинарным, и `False` в противном случае.

**Примеры**:

```python
filepath = 'example.txt'
if is_binary(filepath):
    print(f"Файл '{filepath}' является бинарным")
else:
    print(f"Файл '{filepath}' не является бинарным")
```

### `count_classes_and_functions`

```python
def count_classes_and_functions(filepath: str) -> tuple[int, int]:
    """
    Подсчитывает количество классов и функций в файле.

    Args:
        filepath (str): Путь к файлу

    Returns:
        tuple[int, int]: Количество классов и количество функций
    """
```

**Как работает функция**:

Функция `count_classes_and_functions` открывает файл в текстовом режиме и построчно анализирует его содержимое. Если строка начинается с ключевого слова `class`, увеличивается счетчик классов. Если строка начинается с ключевого слова `def`, увеличивается счетчик функций. В конце функция возвращает кортеж с общим количеством классов и функций.

**Параметры**:

- `filepath` (str): Путь к файлу, в котором необходимо выполнить подсчет.

**Возвращает**:

- `tuple[int, int]`: Кортеж, содержащий количество классов и количество функций.

**Примеры**:

```python
filepath = 'example.py'
total_classes, total_functions = count_classes_and_functions(filepath)
print(f"Всего классов в файле '{filepath}': {total_classes}")
print(f"Всего функций в файле '{filepath}': {total_functions}")
```