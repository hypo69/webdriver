# Модуль для обработки событий ассистента OpenAI

## Обзор

Модуль `event_handler.py` предназначен для обработки событий, генерируемых ассистентом OpenAI. Он определяет класс `EventHandler`, который переопределяет методы для обработки различных типов событий, таких как создание текста, изменение текста и вызовы инструментов. Модуль использует библиотеку `openai` для взаимодействия с API OpenAI.

## Подробней

Этот модуль предоставляет механизм для обработки потока событий, возвращаемого API OpenAI, позволяя реагировать на различные действия, выполняемые ассистентом. Он особенно полезен для приложений, требующих интерактивного взаимодействия с ассистентом, таких как чат-боты или инструменты для совместной работы над кодом. Расположение файла в проекте указывает на его роль в интеграции с OpenAI и обработке событий, генерируемых моделью.

## Классы

### `EventHandler`

**Описание**: Класс `EventHandler` наследует `AssistantEventHandler` из библиотеки `openai` и переопределяет методы для обработки различных типов событий, генерируемых ассистентом OpenAI.

**Принцип работы**:
Класс `EventHandler` предназначен для обработки событий, генерируемых ассистентом OpenAI в процессе выполнения задач. Он переопределяет ряд методов, которые вызываются при возникновении определенных событий, таких как создание текста, изменение текста и вызовы инструментов. Это позволяет приложению реагировать на действия ассистента в режиме реального времени и предоставлять пользователю соответствующую информацию.

**Методы**:
- `on_text_created(self, text: Text) -> None`: Вызывается при создании нового текста ассистентом.
- `on_text_delta(self, delta: TextDelta, snapshot: Text)`: Вызывается при изменении существующего текста ассистентом.
- `on_tool_call_created(self, tool_call: ToolCall)`: Вызывается при создании вызова инструмента ассистентом.
- `on_tool_call_delta(self, delta: ToolCallDelta, snapshot: ToolCall)`: Вызывается при изменении вызова инструмента ассистентом.

**Параметры**:
- `text` (Text): Объект, представляющий созданный текст.
- `delta` (TextDelta): Объект, представляющий изменение текста.
- `snapshot` (Text): Объект, представляющий снимок текста.
- `tool_call` (ToolCall): Объект, представляющий вызов инструмента.
- `delta` (ToolCallDelta): Объект, представляющий изменение вызова инструмента.
- `snapshot` (ToolCall): Объект, представляющий снимок вызова инструмента.

### `EventHandler.on_text_created`

```python
@override
def on_text_created(self, text: Text) -> None:
    """Вызывается при создании нового текста ассистентом.
    
    Args:
        text (Text): Объект, представляющий созданный текст.
    
    Returns:
        None
    """
    ...
```

**Назначение**: Обрабатывает событие создания текста ассистентом.

**Параметры**:
- `text` (Text): Объект, представляющий созданный текст.

**Возвращает**:
- `None`

**Как работает функция**:
1. Функция `on_text_created` вызывается, когда ассистент создает новый текст.
2. Функция выводит строку "assistant > " в консоль, подготавливая место для вывода текста ассистента.

```
A: Получение события создания текста
|
B: Вывод строки "assistant > " в консоль
```

**Примеры**:
```python
# Пример использования класса EventHandler
event_handler = EventHandler()
# Вызов метода on_text_created
# event_handler.on_text_created(text="Hello, world!") #  Строка не будет работать, пока не определен объект Text
```

### `EventHandler.on_text_delta`

```python
@override
def on_text_delta(self, delta: TextDelta, snapshot: Text):
    """Вызывается при изменении существующего текста ассистентом.

    Args:
        delta (TextDelta): Объект, представляющий изменение текста.
        snapshot (Text): Объект, представляющий снимок текста.

    Returns:
        None
    """
    ...
```

**Назначение**: Обрабатывает событие изменения текста ассистентом.

**Параметры**:
- `delta` (TextDelta): Объект, представляющий изменение текста.
- `snapshot` (Text): Объект, представляющий снимок текста.

**Возвращает**:
- `None`

**Как работает функция**:
1. Функция `on_text_delta` вызывается, когда ассистент изменяет существующий текст.
2. Функция выводит изменение текста (`delta.value`) в консоль.

```
A: Получение события изменения текста
|
B: Вывод изменения текста в консоль
```

**Примеры**:
```python
# Пример использования класса EventHandler
event_handler = EventHandler()
# Вызов метода on_text_delta
# event_handler.on_text_delta(delta="!", snapshot="Hello, world") #  Строка не будет работать, пока не определены объекты TextDelta и Text
```

### `EventHandler.on_tool_call_created`

```python
@override
def on_tool_call_created(self, tool_call: ToolCall):
    """Вызывается при создании вызова инструмента ассистентом.

    Args:
        tool_call (ToolCall): Объект, представляющий вызов инструмента.

    Returns:
        None
    """
    ...
```

**Назначение**: Обрабатывает событие создания вызова инструмента ассистентом.

**Параметры**:
- `tool_call` (ToolCall): Объект, представляющий вызов инструмента.

**Возвращает**:
- `None`

**Как работает функция**:
1. Функция `on_tool_call_created` вызывается, когда ассистент создает вызов инструмента.
2. Функция выводит тип вызова инструмента в консоль.

```
A: Получение события создания вызова инструмента
|
B: Вывод типа вызова инструмента в консоль
```

**Примеры**:
```python
# Пример использования класса EventHandler
event_handler = EventHandler()
# Вызов метода on_tool_call_created
# event_handler.on_tool_call_created(tool_call="code_interpreter") #  Строка не будет работать, пока не определен объект ToolCall
```

### `EventHandler.on_tool_call_delta`

```python
 @override
  def on_tool_call_delta(self, delta: ToolCallDelta, snapshot: ToolCall):
    """Вызывается при изменении вызова инструмента ассистентом.

    Args:
        delta (ToolCallDelta): Объект, представляющий изменение вызова инструмента.
        snapshot (ToolCall): Объект, представляющий снимок вызова инструмента.

    Returns:
        None
    """
    ...
```

**Назначение**: Обрабатывает событие изменения вызова инструмента ассистентом.

**Параметры**:
- `delta` (ToolCallDelta): Объект, представляющий изменение вызова инструмента.
- `snapshot` (ToolCall): Объект, представляющий снимок вызова инструмента.

**Возвращает**:
- `None`

**Как работает функция**:
1. Функция `on_tool_call_delta` вызывается, когда ассистент изменяет вызов инструмента.
2. Функция проверяет, является ли тип вызова инструмента "code_interpreter".
3. Если тип вызова инструмента "code_interpreter", функция выводит ввод и вывод интерпретатора кода в консоль.

```
A: Получение события изменения вызова инструмента
|
B: Проверка типа вызова инструмента
|
C: Если тип "code_interpreter", вывод ввода и вывода интерпретатора кода в консоль
```

**Примеры**:
```python
# Пример использования класса EventHandler
event_handler = EventHandler()
# Вызов метода on_tool_call_delta
# event_handler.on_tool_call_delta(delta="code", snapshot="code_interpreter") #  Строка не будет работать, пока не определены объекты ToolCallDelta и ToolCall