# Документация модуля `browser_use.py`

## Обзор

Модуль предназначен для автоматического поиска статей на сайте Habr.com по указанному имени автора, открытия полной версии статьи и генерации токсичного комментария с использованием языковой модели OpenAI. 

## Подробней

Модуль использует библиотеки `langchain_openai`, `browser_use`, `asyncio`, `dotenv` и `logging`. Он позволяет автоматизировать процесс поиска контента на веб-странице и генерации текста на основе найденного контента. В данном случае, код предназначен для демонстрации возможности генерации токсичных комментариев, что может быть использовано в исследовательских целях или для разработки систем модерации контента.

## Функции

### `habra_toxic_commenter`

```python
async def habra_toxic_commenter(author_username: str, model_name: str = "gpt-4o") -> str | None:
    """
    Ищет статью на Хабре по указанному автору, открывает её и генерирует токсичный комментарий.

    Args:
        author_username: Имя пользователя на Хабре.
        model_name: Название языковой модели OpenAI для использования. По умолчанию gpt-4o.

    Returns:
        Строку с результатом работы агента, содержащую название статьи и сгенерированный комментарий.
        Возвращает None, если произошла ошибка.
    """
```

**Назначение**: Функция выполняет поиск статьи на сайте Habr.com по указанному имени автора, открывает её полную версию и генерирует токсичный комментарий с использованием языковой модели OpenAI.

**Параметры**:
- `author_username` (str): Имя пользователя на Хабре, по которому необходимо найти статью.
- `model_name` (str, optional): Название языковой модели OpenAI для использования. По умолчанию `"gpt-4o"`.

**Возвращает**:
- `str | None`: Строка с результатом работы агента, содержащая название статьи и сгенерированный комментарий. Возвращает `None`, если произошла ошибка.

**Вызывает исключения**:
- `Exception`: В случае возникновения ошибки в процессе выполнения функции, информация об ошибке записывается в лог.

**Как работает функция**:
1. Инициализируется языковая модель `ChatOpenAI` с указанным именем модели.
2. Формируется задача для агента, включающая открытие сайта Habr.com, поиск статьи указанного автора, открытие полной версии статьи и генерацию токсичного комментария на русском языке.
3. Создается экземпляр класса `Agent` с указанной задачей и языковой моделью.
4. Запускается асинхронная операция `agent.run()`, которая выполняет задачу и возвращает результат.
5. В случае возникновения ошибки, информация об ошибке записывается в лог, и функция возвращает `None`.

**ASCII Flowchart**:
```
    Начало
    │
    │ Инициализация LLM (ChatOpenAI)
    │
    │ Формирование задачи для агента
    │
    │ Создание экземпляра Agent
    │
    │ Запуск агента (agent.run())
    │
    │ Получение результата
    │
    │ Возврат результата или None (в случае ошибки)
    │
    Конец
```

**Примеры**:

```python
import asyncio
async def main():
    author = "ElKornacio"  # Замените на имя пользователя, статьи которого хотите найти
    result = await habra_toxic_commenter(author_username=author)

    if result:
        print("Результат работы агента:")
        print(result)
    else:
        print("Не удалось получить результат.")

if __name__ == "__main__":
    asyncio.run(main())
```

### `main`

```python
async def main():
    """
    Пример использования функции habra_toxic_commenter.
    """
```

**Назначение**: Функция `main` является точкой входа в асинхронную программу.  Она демонстрирует пример использования функции `habra_toxic_commenter`.

**Параметры**:
- Отсутствуют.

**Возвращает**:
- Отсутствует.

**Как работает функция**:
1. Определяет имя автора (`author = "ElKornacio"`).
2. Вызывает функцию `habra_toxic_commenter` с именем автора.
3. Выводит результат работы агента или сообщение об ошибке.

**ASCII Flowchart**:
```
    Начало
    │
    │ Определение имени автора
    │
    │ Вызов habra_toxic_commenter
    │
    │ Проверка результата
    │
    │ Вывод результата или сообщения об ошибке
    │
    Конец
```

**Примеры**:

```python
import asyncio
async def main():
    author = "ElKornacio"  # Замените на имя пользователя, статьи которого хотите найти
    result = await habra_toxic_commenter(author_username=author)

    if result:
        print("Результат работы агента:")
        print(result)
    else:
        print("Не удалось получить результат.")

if __name__ == "__main__":
    asyncio.run(main())
```