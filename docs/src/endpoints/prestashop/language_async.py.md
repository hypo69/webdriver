# Модуль для асинхронного управления языками в PrestaShop

## Обзор

Модуль `language_async.py` предоставляет асинхронный класс `PrestaLanguageAync`, который упрощает взаимодействие с языками в интернет-магазине PrestaShop. Он позволяет получать, добавлять, удалять и обновлять языки, используя асинхронные вызовы API PrestaShop.

## Подробнее

Модуль предназначен для асинхронного управления языковыми настройками в PrestaShop. Он использует асинхронные запросы для взаимодействия с API PrestaShop, что позволяет эффективно управлять языками без блокировки основного потока выполнения. Расположение файла в структуре проекта указывает на его роль как части подсистемы для интеграции с PrestaShop.

## Классы

### `PrestaLanguageAync`

**Описание**: Класс `PrestaLanguageAync` предназначен для асинхронного управления языками в PrestaShop. Он наследует функциональность от класса `PrestaShopAsync` и предоставляет методы для получения информации о языках, а также для их добавления, обновления и удаления.

**Наследует**:

- `PrestaShopAsync`: Предоставляет базовую функциональность для взаимодействия с API PrestaShop.

**Методы**:

- `__init__(self, *args, **kwards)`: Конструктор класса. Инициализирует экземпляр класса `PrestaLanguageAync`.
- `get_lang_name_by_index(self, lang_index: int | str) -> str`: Асинхронно возвращает имя языка (ISO-код) по его индексу в таблице PrestaShop.
- `get_languages_schema(self) -> dict`: Асинхронно получает схему языков из API PrestaShop.

## Функции

### `get_lang_name_by_index`

**Назначение**: Асинхронно получает имя языка (ISO-код) по его индексу в таблице PrestaShop.

**Параметры**:

- `lang_index` (int | str): Индекс языка в таблице PrestaShop.

**Возвращает**:

- `str`: Имя языка (ISO-код). Возвращает пустую строку в случае ошибки.

**Вызывает исключения**:

- `Exception`: Логируется в случае возникновения ошибки при получении языка по индексу.

**Как работает функция**:

1. Функция пытается получить имя языка, используя метод `super().get()` из родительского класса `PrestaShopAsync`.
2. Если происходит ошибка, она логируется с помощью `logger.error`, и возвращается пустая строка.

```
     A (Получение имени языка по индексу)
     |
     -- B (Вызов super().get())
     |
     C (Обработка исключения)
     |
     D (Логирование ошибки)
```

**Примеры**:

```python
# Пример использования
lang_class = PrestaLanguageAync()
lang_name = await lang_class.get_lang_name_by_index(1)
print(lang_name)
```

### `get_languages_schema`

**Назначение**: Асинхронно получает схему языков из API PrestaShop.

**Параметры**:

- Отсутствуют.

**Возвращает**:

- `dict`: Словарь, представляющий схему языков.

**Как работает функция**:

1. Функция вызывает метод `super().get_languages_schema()` для получения схемы языков.
2. Полученная схема выводится в консоль с использованием `print(lang_dict)`.

```
     A (Получение схемы языков)
     |
     -- B (Вызов super().get_languages_schema())
     |
     C (Вывод схемы в консоль)
```

**Примеры**:

```python
# Пример использования
lang_class = PrestaLanguageAync()
languagas_schema = await lang_class.get_languages_schema()
print(languagas_schema)
```

### `main`

**Назначение**: Асинхронная функция, предназначенная для демонстрации работы класса `PrestaLanguageAync`.

**Параметры**:

- Отсутствуют.

**Как работает функция**:

1. Создается экземпляр класса `PrestaLanguageAync`.
2. Вызывается метод `get_languages_schema` для получения схемы языков.
3. Полученная схема выводится в консоль.

```
     A (Создание экземпляра PrestaLanguageAync)
     |
     -- B (Получение схемы языков)
     |
     C (Вывод схемы в консоль)
```

### Запуск модуля

**Назначение**: Запуск асинхронной функции `main`, если скрипт вызывается как основной.

**Как работает**:

1. Проверяется, является ли текущий скрипт основным (`if __name__ == '__main__'`).
2. Если да, то запускается асинхронная функция `main` с помощью `asyncio.run(main())`.

```
     A (Проверка __name__ == '__main__')
     |
     -- B (Запуск asyncio.run(main()))