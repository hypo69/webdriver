# Модуль stubs.py

## Обзор

Модуль `stubs.py` предназначен для определения структур данных, используемых при взаимодействии с API g4f (gpt4free). Он содержит классы, основанные на `pydantic.BaseModel`, которые описывают форматы запросов и ответов для различных операций, таких как завершение чата, генерация изображений, получение информации о провайдерах и моделях, а также обработка ошибок.

## Подробней

Модуль предоставляет структуры данных для стандартизации запросов и ответов при использовании API g4f, облегчая интеграцию и взаимодействие с различными сервисами и моделями. Он определяет конфигурации для запросов к API, таких как параметры сообщений, модели, провайдеры и другие настройки, а также форматы ответов, включая информацию об ошибках, моделях и провайдерах.

## Классы

### `ChatCompletionsConfig`

**Описание**: Класс конфигурации для запросов на завершение чата. Определяет структуру данных, необходимую для отправки запроса на генерацию текста на основе предоставленных сообщений и параметров.

**Принцип работы**:
Класс `ChatCompletionsConfig` использует `pydantic.BaseModel` для определения структуры данных конфигурации запроса на завершение чата. Он содержит параметры, такие как сообщения, модель, провайдер, параметры потоковой передачи, и другие настройки, необходимые для запроса к API.

**Аттрибуты**:

- `messages` (Messages): Список сообщений для запроса.
- `model` (str): Имя модели для использования.
- `provider` (Optional[str]): Провайдер модели.
- `stream` (bool): Флаг потоковой передачи.
- `image` (Optional[str]): Ссылка на изображение.
- `image_name` (Optional[str]): Имя изображения.
- `images` (Optional[list[tuple[str, str]]]): Список кортежей изображений.
- `media` (Optional[list[tuple[str, str]]]): Список кортежей медиафайлов.
- `modalities` (Optional[list[str]]): Список модальностей.
- `temperature` (Optional[float]): Температура для генерации.
- `presence_penalty` (Optional[float]): Штраф за присутствие.
- `frequency_penalty` (Optional[float]): Штраф за частоту.
- `top_p` (Optional[float]): Top-p значение.
- `max_tokens` (Optional[int]): Максимальное количество токенов.
- `stop` (Union[list[str], str, None]): Условия остановки генерации.
- `api_key` (Optional[str]): Ключ API.
- `api_base` (str): Базовый URL API.
- `web_search` (Optional[bool]): Флаг веб-поиска.
- `proxy` (Optional[str]): Прокси-сервер.
- `conversation_id` (Optional[str]): ID разговора.
- `conversation` (Optional[dict]): Данные разговора.
- `return_conversation` (Optional[bool]): Флаг возврата разговора.
- `history_disabled` (Optional[bool]): Флаг отключения истории.
- `timeout` (Optional[int]): Время ожидания.
- `tool_calls` (list): Список вызовов инструментов.
- `tools` (list): Список инструментов.
- `parallel_tool_calls` (bool): Флаг параллельных вызовов инструментов.
- `tool_choice` (Optional[str]): Выбор инструмента.
- `reasoning_effort` (Optional[str]): Уровень усилий для рассуждений.
- `logit_bias` (Optional[dict]): Смещение логитов.
- `modalities` (Optional[list[str]]): Список модальностей.
- `audio` (Optional[dict]): Аудио данные.
- `response_format` (Optional[dict]): Формат ответа.
- `extra_data` (Optional[dict]): Дополнительные данные.

### `ImageGenerationConfig`

**Описание**: Класс конфигурации для запросов на генерацию изображений. Определяет структуру данных, необходимую для отправки запроса на генерацию изображения на основе предоставленного описания и параметров.

**Принцип работы**:
Класс `ImageGenerationConfig` использует `pydantic.BaseModel` для определения структуры данных конфигурации запроса на генерацию изображений. Он содержит параметры, такие как текстовое описание, модель, провайдер и другие настройки, необходимые для запроса к API.

**Аттрибуты**:

- `prompt` (str): Текстовое описание изображения.
- `model` (Optional[str]): Имя модели для использования.
- `provider` (Optional[str]): Провайдер модели.
- `response_format` (Optional[str]): Формат ответа.
- `api_key` (Optional[str]): Ключ API.
- `proxy` (Optional[str]): Прокси-сервер.
- `width` (Optional[int]): Ширина изображения.
- `height` (Optional[int]): Высота изображения.
- `num_inference_steps` (Optional[int]): Количество шагов для генерации.
- `seed` (Optional[int]): Зерно для генерации.
- `guidance_scale` (Optional[int]): Масштаб направления.
- `aspect_ratio` (Optional[str]): Соотношение сторон.
- `n` (Optional[int]): Количество изображений.
- `negative_prompt` (Optional[str]): Отрицательное описание.
- `resolution` (Optional[str]): Разрешение изображения.

### `ProviderResponseModel`

**Описание**: Класс модели ответа провайдера. Определяет структуру данных, возвращаемую API при запросе информации о провайдере.

**Принцип работы**:
Класс `ProviderResponseModel` использует `pydantic.BaseModel` для определения структуры данных ответа провайдера. Он содержит параметры, такие как ID, объект, дата создания, URL и метка.

**Аттрибуты**:

- `id` (str): ID провайдера.
- `object` (str): Тип объекта (всегда "provider").
- `created` (int): Дата создания.
- `url` (Optional[str]): URL провайдера.
- `label` (Optional[str]): Метка провайдера.

### `ProviderResponseDetailModel`

**Описание**: Класс детальной модели ответа провайдера. Наследуется от `ProviderResponseModel` и добавляет информацию о моделях, поддерживаемых провайдером.

**Принцип работы**:
Класс `ProviderResponseDetailModel` наследует атрибуты от `ProviderResponseModel` и добавляет списки моделей, моделей изображений, моделей машинного зрения и параметров.

**Наследует**:
- `ProviderResponseModel`: Предоставляет базовые атрибуты для модели ответа провайдера.

**Аттрибуты**:

- `models` (list[str]): Список строковых идентификаторов моделей, поддерживаемых провайдером.
- `image_models` (list[str]): Список строковых идентификаторов моделей генерации изображений, поддерживаемых провайдером.
- `vision_models` (list[str]): Список строковых идентификаторов моделей машинного зрения, поддерживаемых провайдером.
- `params` (list[str]): Список параметров.

### `ModelResponseModel`

**Описание**: Класс модели ответа модели. Определяет структуру данных, возвращаемую API при запросе информации о модели.

**Принцип работы**:
Класс `ModelResponseModel` использует `pydantic.BaseModel` для определения структуры данных ответа модели. Он содержит параметры, такие как ID, объект, дата создания и владелец.

**Аттрибуты**:

- `id` (str): ID модели.
- `object` (str): Тип объекта (всегда "model").
- `created` (int): Дата создания.
- `owned_by` (Optional[str]): Владелец модели.

### `UploadResponseModel`

**Описание**: Класс модели ответа при загрузке файла. Определяет структуру данных, возвращаемую API при загрузке файла.

**Принцип работы**:
Класс `UploadResponseModel` использует `pydantic.BaseModel` для определения структуры данных ответа при загрузке файла. Он содержит ID бакета и URL файла.

**Аттрибуты**:

- `bucket_id` (str): ID бакета.
- `url` (str): URL файла.

### `ErrorResponseModel`

**Описание**: Класс модели ответа об ошибке. Определяет структуру данных, возвращаемую API при возникновении ошибки.

**Принцип работы**:
Класс `ErrorResponseModel` использует `pydantic.BaseModel` для определения структуры данных ответа об ошибке. Он содержит объект ошибки, модель и провайдер.

**Аттрибуты**:

- `error` (ErrorResponseMessageModel): Объект сообщения об ошибке.
- `model` (Optional[str]): Модель, вызвавшая ошибку.
- `provider` (Optional[str]): Провайдер, вызвавший ошибку.

### `ErrorResponseMessageModel`

**Описание**: Класс модели сообщения об ошибке. Определяет структуру данных, содержащую сообщение об ошибке.

**Принцип работы**:
Класс `ErrorResponseMessageModel` использует `pydantic.BaseModel` для определения структуры данных сообщения об ошибке. Он содержит сообщение об ошибке.

**Аттрибуты**:

- `message` (str): Сообщение об ошибке.

### `FileResponseModel`

**Описание**: Класс модели ответа файла. Определяет структуру данных, содержащую имя файла.

**Принцип работы**:
Класс `FileResponseModel` использует `pydantic.BaseModel` для определения структуры данных ответа файла. Он содержит имя файла.

**Аттрибуты**:

- `filename` (str): Имя файла.

## Функции

В данном модуле нет отдельных функций, только классы моделей данных.