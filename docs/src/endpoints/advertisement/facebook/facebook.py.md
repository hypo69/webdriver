# Модуль рекламы на Facebook

## Обзор

Модуль `facebook.py` предназначен для автоматизации взаимодействия с Facebook через веб-драйвер. Он включает в себя классы и функции для выполнения различных действий, таких как вход в систему, публикация сообщений и загрузка медиафайлов. Модуль является частью проекта `hypotez` и располагается в директории `src/endpoints/advertisement/facebook`.

## Подробней

Этот модуль предоставляет инструменты для автоматизации рекламных кампаний в Facebook. Он использует веб-драйвер для имитации действий пользователя, таких как вход в аккаунт, публикация контента и загрузка медиафайлов. Модуль предназначен для работы с различными сценариями, включая переключение аккаунтов и продвижение публикаций.

## Классы

### `Facebook`

**Описание**: Класс для взаимодействия с Facebook через веб-драйвер.

**Принцип работы**:
Класс `Facebook` инициализируется с инстансом драйвера, именем промоутера и списком путей к файлам групп. Он предоставляет методы для выполнения различных действий в Facebook, таких как вход в систему, продвижение публикаций и загрузка медиафайлов. Класс использует другие модули и функции для выполнения конкретных сценариев.

**Атрибуты**:
- `d` (Driver): Инстанс веб-драйвера для взаимодействия с Facebook.
- `start_page` (str): URL стартовой страницы Facebook. По умолчанию `https://www.facebook.com/hypotez.promocodes`.
- `promoter` (str): Имя промоутера.

**Методы**:
- `__init__`: Инициализирует экземпляр класса `Facebook`.
- `login`: Выполняет вход в Facebook.
- `promote_post`: Продвигает пост в Facebook.
- `promote_event`: Продвигает мероприятие в Facebook.

#### `__init__`

```python
def __init__(self, driver: 'Driver', promoter: str, group_file_paths: list[str], *args, **kwards):
    """ Я могу передать уже запущенный инстанс драйвера. Например, из алиэкспресс
    @todo:
        - Добавить проверку на какой странице открылся фейсбук. Если открылась страница логина - выполнитл сценарий логина
    """
    self.d = driver
    self.promoter = promoter
    ...
    
    #self.driver.get_url (self.start_page)
    #switch_account(self.driver) # <- переключение профиля, если не на своей странице
```

**Назначение**: Инициализация экземпляра класса `Facebook`.

**Параметры**:
- `driver` (Driver): Инстанс веб-драйвера для взаимодействия с Facebook.
- `promoter` (str): Имя промоутера.
- `group_file_paths` (list[str]): Список путей к файлам групп.
- `*args`: Произвольные позиционные аргументы.
- `**kwards`: Произвольные именованные аргументы.

**Как работает функция**:
1.  Присваивает переданный инстанс драйвера атрибуту `d`.
2.  Присваивает имя промоутера атрибуту `promoter`.

#### `login`

```python
def login(self) -> bool:
    return login(self)
```

**Назначение**: Выполняет вход в Facebook.

**Возвращает**:
- `bool`: `True`, если вход выполнен успешно, иначе `False`.

**Как работает функция**:

1.  Вызывает функцию `login` из модуля `src.endpoints.advertisement.facebook.scenarios.login`, передавая ей текущий инстанс класса `Facebook`.

#### `promote_post`

```python
def promote_post(self, item: SimpleNamespace) -> bool:
    """ Функция отправляет текст в форму сообщения 
    @param message: сообщение текстом. Знаки `;` будут заменеы на `SHIFT+ENTER`
    @returns `True`, если успешно, иначе `False`
    """
    ...
    return promote_post(self.d, item)
```

**Назначение**: Продвигает пост в Facebook.

**Параметры**:
- `item` (SimpleNamespace): Объект, содержащий информацию о посте для продвижения.

**Возвращает**:
- `bool`: `True`, если продвижение выполнено успешно, иначе `False`.

**Как работает функция**:

1.  Вызывает функцию `promote_post` из модуля `src.endpoints.advertisement.facebook.scenarios`, передавая ей инстанс веб-драйвера `self.d` и объект `item`.

#### `promote_event`

```python
def promote_event(self, event: SimpleNamespace):
    """ Пример функции для продвижения события """
    ...
```

**Назначение**: Продвигает мероприятие в Facebook.

**Параметры**:
- `event` (SimpleNamespace): Объект, содержащий информацию о мероприятии для продвижения.

## Функции

В данном файле функции определены в основном в виде методов класса `Facebook`. Однако, есть импортированные функции из других модулей, таких как `login`, `switch_account`, `promote_post`, `post_title`, `upload_media`, `update_images_captions`.