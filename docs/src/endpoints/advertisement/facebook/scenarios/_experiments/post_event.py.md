# Модуль для обработки и отправки событий на Facebook

## Обзор

Модуль `post_event.py` предназначен для автоматизации процесса публикации информации о мероприятиях в группах Facebook. Он включает в себя функции для получения данных о мероприятиях из JSON-файлов, их обработки и отправки в указанные группы. Модуль использует веб-драйвер для взаимодействия с Facebook и требует наличия корректно настроенных JSON-файлов с данными о группах и мероприятиях.

## Подробнее

Основная цель модуля - упростить и автоматизировать процесс информирования целевой аудитории о предстоящих мероприятиях через социальную сеть Facebook. Модуль предназначен для работы с данными, хранящимися в Google Drive, и использует веб-драйвер для эмуляции действий пользователя в браузере.

## Функции

### `post_events`

```python
def post_events():
    """Обрабатывает и отправляет мероприятия на Facebook.

    Функция получает данные о мероприятиях из указанной директории, загружает детали мероприятий из JSON-файлов
    и отправляет их на Facebook. Мероприятия хранятся в структуре директорий под папкой `facebook/events`.

    Raises:
        FileNotFoundError: Если JSON-файл с информацией о мероприятии отсутствует.
    """
    ...
```

**Назначение**: Обработка и публикация мероприятий на Facebook.

**Как работает функция**:

1.  Инициализирует веб-драйвер Chrome.
2.  Получает список директорий с мероприятиями из папки `facebook/events` в Google Drive.
3.  Получает список файлов с информацией о группах Facebook, в которые планируется отправка мероприятий.
4.  Создает экземпляр класса `FacebookPromoter` для управления процессом публикации.
5.  Для каждого мероприятия загружает детали из JSON-файла.
6.  Вызывает метод `process_groups` класса `FacebookPromoter` для публикации мероприятия в выбранных группах.

**ASCII flowchart**:

```
    Инициализация веб-драйвера Chrome
    ↓
    Получение списка директорий с мероприятиями
    ↓
    Получение списка файлов с информацией о группах Facebook
    ↓
    Создание экземпляра класса FacebookPromoter
    ↓
    Для каждого мероприятия:
        Загрузка деталей из JSON-файла
        ↓
        Публикация мероприятия в группах Facebook
```

**Примеры**:

```python
post_events()
```

### `post_to_my_group`

```python
def post_to_my_group(event):
    """"""
    ...
```

**Назначение**: Публикация мероприятия в персональной группе пользователя.

**Как работает функция**:

1.  Загружает информацию о группах пользователя из JSON-файла `my_managed_groups.json`.
2.  Инициализирует веб-драйвер Chrome.
3.  Для каждой группы пользователя извлекает URL группы.
4.  Переходит по URL группы с использованием веб-драйвера.
5.  Вызывает функцию `post_event` для публикации мероприятия в данной группе.

**ASCII flowchart**:

```
    Загрузка информации о группах пользователя из JSON-файла
    ↓
    Инициализация веб-драйвера Chrome
    ↓
    Для каждой группы пользователя:
        Извлечение URL группы
        ↓
        Переход по URL группы
        ↓
        Публикация мероприятия в группе
```

**Примеры**:

```python
event = j_loads_ns(gs.path.google_drive / 'aliexpress' / 'events'  / 'sep_11_2024_over60_pricedown' / 'sep_11_2024_over60_pricedown.json')
post_to_my_group(event)