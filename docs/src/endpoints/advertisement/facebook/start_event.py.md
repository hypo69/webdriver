# Модуль для запуска рекламных мероприятий в Facebook

## Обзор

Модуль предназначен для автоматической публикации рекламных мероприятий в группах Facebook. Он использует веб-драйвер для взаимодействия с Facebook и модуль `FacebookPromoter` для организации и выполнения рекламных кампаний. Модуль позволяет задавать списки файлов с группами, исключать определенные файлы из обработки и указывать названия мероприятий для публикации.

## Подробней

Этот код является отправной точкой для рекламной кампании в Facebook. Он инициализирует веб-драйвер, настраивает параметры продвижения и запускает цикл, в котором рекламные мероприятия выполняются с заданным интервалом. Расположение файла в проекте `hypotez` указывает на то, что он является частью системы управления рекламными кампаниями и отвечает за взаимодействие с Facebook.

## Классы

В данном файле классы не определены.

## Функции

В данном файле функции не определены.

## Переменные

### `filenames: list[str]`

Список имен файлов, содержащих информацию о группах Facebook, в которых будут размещаться рекламные мероприятия.

### `excluded_filenames: list[str]`

Список имен файлов, которые следует исключить из обработки. В данном случае исключается файл "my_managed_groups.json".

### `events_names: list`

Список названий рекламных мероприятий, которые будут запущены.

### `promoter: FacebookPromoter`

Экземпляр класса `FacebookPromoter`, который отвечает за организацию и выполнение рекламных мероприятий.
- **Параметры**:
  - `d`: Экземпляр веб-драйвера (в данном случае `Chrome`).
  - `group_file_paths`: Список путей к файлам с информацией о группах Facebook.
  - `no_video`: Флаг, указывающий на отсутствие видео в рекламных материалах.

### `d: Driver`

Экземпляр класса `Driver`, который используется для управления браузером Chrome.
- **Методы**:
    - `get_url(r"https://facebook.com")`: Открывает указанный URL в браузере.

## Основной цикл `try...except`

```python
try:
    while True:
        logger.debug(f"waikig up {time.strftime('%H:%M:%S')}",None,False)
        promoter.run_events(events_names = events_names, group_file_paths = filenames)
        logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}",None,False)
        time.sleep(7200)

except KeyboardInterrupt:
    logger.info("Campaign promotion interrupted.")
```

**Как работает цикл**:

1.  **Бесконечный цикл**: `while True:` обеспечивает непрерывное выполнение рекламных мероприятий.
2.  **Логирование времени пробуждения**: `logger.debug(f"waikig up {time.strftime('%H:%M:%S')}",None,False)` записывает в журнал время начала выполнения итерации цикла.
3.  **Запуск рекламных мероприятий**: `promoter.run_events(events_names=events_names, group_file_paths=filenames)` запускает рекламные мероприятия, используя названия мероприятий и файлы с группами, переданные в функцию.
4.  **Логирование времени засыпания**: `logger.debug(f"going to sleep at {time.strftime('%H:%M:%S')}",None,False)` записывает в журнал время окончания выполнения итерации цикла.
5.  **Пауза**: `time.sleep(7200)` приостанавливает выполнение программы на 7200 секунд (2 часа).
6.  **Обработка прерывания с клавиатуры**: `except KeyboardInterrupt:` перехватывает исключение, возникающее при прерывании программы пользователем (например, нажатием Ctrl+C), и записывает в журнал сообщение о прерывании рекламной кампании.

**ASII flowchart**

```
Начало цикла
  |
  V
Логирование времени пробуждения
  |
  V
Запуск рекламных мероприятий (promoter.run_events)
  |
  V
Логирование времени засыпания
  |
  V
Пауза (time.sleep)
  |
  V
Конец цикла (повторение или прерывание)
```

**Примеры**:

1.  Запуск рекламных мероприятий с использованием стандартных параметров:

```python
promoter = FacebookPromoter(d, group_file_paths=filenames, no_video = True)
promoter.run_events(events_names = events_names, group_file_paths = filenames)
```

2.  Прерывание рекламной кампании с помощью `KeyboardInterrupt`:

```python
try:
    while True:
        promoter.run_events(events_names = events_names, group_file_paths = filenames)
        time.sleep(7200)
except KeyboardInterrupt as ex:
    logger.info("Campaign promotion interrupted.", ex, exc_info=True)