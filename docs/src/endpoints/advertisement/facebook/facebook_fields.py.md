# Модуль facebook_fields.py

## Обзор

Модуль `facebook_fields.py` предназначен для работы с полями, используемыми в рекламных объявлениях и событиях Facebook. Он содержит класс `FacebookFields`, который загружает данные о полях из JSON-файла и делает их доступными как атрибуты экземпляра класса. Это позволяет централизованно управлять набором полей, используемых в интеграциях с Facebook.

## Подробней

Модуль обеспечивает удобный способ загрузки и использования конфигурации полей для Facebook, что упрощает настройку и поддержку рекламных интеграций. Он использует модуль `src.logger.logger` для логирования ошибок и отладочной информации, а также функции `j_loads` для безопасной загрузки данных из JSON-файлов.

## Классы

### `FacebookFields`

**Описание**: Класс `FacebookFields` предназначен для хранения и предоставления доступа к полям, используемым в рекламных объявлениях и событиях Facebook.

**Принцип работы**:
1.  При инициализации класса вызывается метод `_payload`, который загружает данные из JSON-файла, расположенного по пути `src/advertisement/facebok/facebook_feilds.json`.
2.  Данные из JSON-файла преобразуются в атрибуты экземпляра класса, что позволяет обращаться к ним через `self`.
3.  В случае ошибки загрузки данных, в лог записывается отладочное сообщение.

```
A[Инициализация класса FacebookFields]
|
B[Вызов метода _payload]
|
C[Загрузка данных из JSON-файла]
|
D[Преобразование данных в атрибуты экземпляра класса]
|
E[Запись отладочного сообщения в случае ошибки]
|
F[Завершение]
```

## Методы

### `__init__`

```python
def __init__(self):
    """ """
    ...
    self._payload()
```

**Назначение**: Инициализирует экземпляр класса `FacebookFields` и вызывает метод `_payload` для загрузки данных о полях.

**Параметры**:
-   Нет.

**Возвращает**:
-   Нет.

**Как работает функция**:
1.  Выполняется инициализация класса `FacebookFields`.
2.  Вызывается метод `self._payload()`, который отвечает за загрузку данных из JSON-файла и установку атрибутов класса.

### `_payload`

```python
def _payload(self):
    """ """
    ...
    data = j_loads (Path (gs.path.src, 'advertisement', 'facebok', 'facebook_feilds.json'))
    if not data:
        logger.debug(f"Ошибка загрузки полей из файла {gs.path.src}/advertisement/facebok/facebook_feilds.json")
        return 
    for name, value in data.items():
        setattr(self, f'{name}', value)
    return True
```

**Назначение**: Загружает данные о полях из JSON-файла и устанавливает их как атрибуты экземпляра класса.

**Параметры**:
-   Нет.

**Возвращает**:
-   `True` в случае успешной загрузки и установки атрибутов.
-   `None` в случае ошибки загрузки данных.

**Как работает функция**:

1.  Формируется путь к JSON-файлу, используя `gs.path.src` и относительный путь `'advertisement/facebok/facebook_feilds.json'`.
2.  Вызывается функция `j_loads` для загрузки данных из JSON-файла.
3.  Если данные не загружены (например, файл не существует или поврежден), в лог записывается отладочное сообщение с использованием `logger.debug`, и функция возвращает `None`.
4.  Если данные успешно загружены, происходит итерация по элементам словаря `data`, и для каждого элемента устанавливается атрибут экземпляра класса с именем, соответствующим ключу элемента, и значением, соответствующим значению элемента.
5.  После установки всех атрибутов функция возвращает `True`.

```
A[Формирование пути к JSON-файлу]
|
B[Загрузка данных из JSON-файла с использованием j_loads]
|
C[Проверка наличия данных]
|
D[Запись отладочного сообщения в случае ошибки загрузки]
|
E[Установка атрибутов экземпляра класса]
|
F[Возврат True в случае успеха]
```

**Примеры**:

```python
from src.endpoints.advertisement.facebook.facebook_fields import FacebookFields
from pathlib import Path
from src import gs

# Предположим, что структура gs.path задана и файл существует

# Создаем экземпляр класса FacebookFields
fields = FacebookFields()

# Теперь поля из JSON-файла доступны как атрибуты экземпляра класса
# Например, если в JSON есть поле 'ad_name', мы можем получить к нему доступ так:
# ad_name = fields.ad_name
# Если файл не найден или произошла ошибка при загрузке, атрибуты не будут установлены