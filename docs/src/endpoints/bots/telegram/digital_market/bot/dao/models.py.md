# Модуль для определения моделей базы данных Telegram-бота для цифрового рынка
=================================================================

Модуль содержит классы, представляющие модели таблиц базы данных, такие как пользователи, категории, продукты и покупки.
Он использует SQLAlchemy ORM для определения структуры таблиц и связей между ними.

## Обзор

Этот модуль определяет структуру базы данных, используемую Telegram-ботом для цифрового рынка. Он включает в себя модели для пользователей, категорий продуктов, самих продуктов и истории покупок. Модуль использует SQLAlchemy для определения структуры таблиц и управления связями между ними.

## Подробней

Модуль определяет классы, которые соответствуют таблицам в базе данных. Каждый класс использует декларативный стиль SQLAlchemy для определения столбцов таблицы и их типов данных. Связи между таблицами настраиваются с использованием `relationship`, что позволяет легко получать доступ к связанным данным.

## Классы

### `User`

**Описание**: Представляет пользователя бота.

**Принцип работы**:
Класс `User` представляет таблицу `users` в базе данных. Он содержит информацию о пользователе, такую как идентификатор Telegram, имя пользователя, имя и фамилия. Также устанавливает связь "один ко многим" с таблицей `Purchase` через `relationship`, что позволяет получить все покупки, совершенные пользователем.

**Атрибуты**:
- `telegram_id` (int): Уникальный идентификатор пользователя в Telegram. Не может быть `None`.
- `username` (str | None): Имя пользователя в Telegram. Может быть `None`.
- `first_name` (str | None): Имя пользователя. Может быть `None`.
- `last_name` (str | None): Фамилия пользователя. Может быть `None`.
- `purchases` (List['Purchase']): Список покупок, связанных с пользователем.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `User`.

### `Category`

**Описание**: Представляет категорию продукта.

**Принцип работы**:
Класс `Category` представляет таблицу `categories` в базе данных. Он содержит информацию о категории продукта. Также устанавливает связь "один ко многим" с таблицей `Product` через `relationship`, что позволяет получить все продукты, относящиеся к данной категории.

**Атрибуты**:
- `category_name` (str): Название категории.
- `products` (List["Product"]): Список продуктов, связанных с категорией.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Category`.

### `Product`

**Описание**: Представляет продукт.

**Принцип работы**:
Класс `Product` представляет таблицу `products` в базе данных. Он содержит информацию о продукте, такую как название, описание, цена, file_id, category_id и hidden_content. Устанавливает связь "один ко многим" с таблицей `Purchase` через `relationship`, что позволяет получить все покупки, связанные с продуктом, и связь "многие к одному" с таблицей `Category`.

**Атрибуты**:
- `name` (str): Название продукта.
- `description` (str): Описание продукта.
- `price` (int): Цена продукта.
- `file_id` (str | None): Идентификатор файла, связанного с продуктом. Может быть `None`.
- `category_id` (int): Идентификатор категории, к которой относится продукт.
- `hidden_content` (str): Скрытое содержимое продукта.
- `category` (Category): Категория, к которой относится продукт.
- `purchases` (List['Purchase']): Список покупок, связанных с продуктом.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Product`.

### `Purchase`

**Описание**: Представляет покупку.

**Принцип работы**:
Класс `Purchase` представляет таблицу `purchases` в базе данных. Он содержит информацию о покупке, такую как идентификатор пользователя, идентификатор продукта, цена, тип оплаты, идентификатор платежа. Устанавливает связь "многие к одному" с таблицами `User` и `Product`.

**Атрибуты**:
- `user_id` (int): Идентификатор пользователя, совершившего покупку.
- `product_id` (int): Идентификатор купленного продукта.
- `price` (int): Цена покупки.
- `payment_type` (str): Тип оплаты.
- `payment_id` (str): Идентификатор платежа.
- `user` (User): Пользователь, совершивший покупку.
- `product` (Product): Купленный продукт.

**Методы**:
- `__repr__`: Возвращает строковое представление объекта `Purchase`.

## Функции

В данном модуле функции отсутствуют.