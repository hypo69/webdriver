# Модуль `Yqcloud.py`

## Обзор

Модуль предоставляет класс для взаимодействия с Yqcloud в качестве провайдера для генерации текста.
Он определяет функцию `_create_completion`, которая отправляет запросы к API Yqcloud и возвращает сгенерированный текст.

## Подробней

Модуль предназначен для интеграции с Yqcloud для генерации текста на основе предоставленных сообщений.
Он использует API `api.aichatos.cloud` для отправки запросов и получения ответов.

## Функции

### `_create_completion`

```python
def _create_completion(model: str, messages: list, stream: bool, **kwargs):
    """
    Создает запрос на завершение текста к API Yqcloud.

    Args:
        model (str): Модель для использования (например, 'gpt-3.5-turbo').
        messages (list): Список сообщений для отправки в API.
        stream (bool): Флаг, указывающий, следует ли использовать потоковую передачу.
        **kwargs: Дополнительные аргументы.

    Returns:
        Generator[str, None, None]: Генератор токенов сгенерированного текста.

    Как работает функция:
    1.  Формирует заголовки запроса, включая `authority`, `origin`, `referer` и `user-agent`.
    2.  Создает JSON-данные для запроса, включая `prompt` (сообщение пользователя), `userId`, `network`, `apikey` и `system`.
    3.  Отправляет POST-запрос к API `https://api.aichatos.cloud/api/generateStream` с заголовками и JSON-данными.
    4.  Итерируется по содержимому ответа, декодирует каждый токен и возвращает его.
    5.  Удаляет из токенов фразу `always respond in english`.

    Внутренние функции:
    Внутри данной функции нет внутренних функций.

    ASII flowchart:
    Создание заголовков и данных запроса --> Отправка POST-запроса к API --> Итерация по содержимому ответа --> Декодирование токенов --> Возврат токенов

    Примеры:
    Примеры использования функции _create_completion не предоставлены в данном коде.
    """
```

**Параметры**:

*   `model` (str): Модель, используемая для генерации текста.
*   `messages` (list): Список сообщений, отправляемых в API Yqcloud. Сообщения содержат текст запроса.
*   `stream` (bool): Флаг, указывающий на использование потоковой передачи данных.
*   `**kwargs`: Дополнительные параметры, которые могут быть переданы в API.

**Возвращает**:

*   `Generator[str, None, None]`: Генератор, выдающий токены сгенерированного текста.

### `params`

```python
params = f'g4f.Providers.{os.path.basename(__file__)[:-3]} supports: ' + \
    '({0})'.format(', '.join([f"{name}: {get_type_hints(_create_completion)[name].__name__}" for name in _create_completion.__code__.co_varnames[:_create_completion.__code__.co_argcount]]))
```

**Описание**:

Строка `params` формируется для предоставления информации о поддержке типов параметров функции `_create_completion`.
Она содержит имя текущего файла (без расширения `.py`) и список параметров функции `_create_completion` с указанием их типов.

**Как работает**:

1.  Получает имя текущего файла без расширения `.py` с использованием `os.path.basename(__file__)[:-3]`.
2.  Получает типы параметров функции `_create_completion` с использованием `get_type_hints(_create_completion)`.
3.  Формирует строку, содержащую имя параметра и его тип, для каждого параметра функции.
4.  Объединяет все параметры в одну строку, разделенную запятыми.
5.  Формирует итоговую строку `params`, содержащую информацию о поддержке типов параметров.

**Пример**:

```python
print(params)
# g4f.Providers.Yqcloud supports: (model: str, messages: list, stream: bool, kwargs: Dict)