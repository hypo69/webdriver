# Модуль для работы с URL строками
## Обзор

Модуль `src.utils.string.url` предназначен для работы с URL строками. Он предоставляет функции для извлечения параметров запроса из URL, проверки URL на валидность и сокращения длинных ссылок с использованием сервиса TinyURL.

## Подробней

Этот модуль предоставляет инструменты для обработки URL, что может быть полезно при работе с веб-запросами, анализе URL и манипуляции ссылками. Модуль использует сторонние библиотеки `urllib.parse` для парсинга URL и `validators` для проверки валидности URL. Также используется библиотека `requests` для взаимодействия с сервисом сокращения ссылок TinyURL.

## Функции

### `extract_url_params`

```python
def extract_url_params(url: str) -> dict | None:
    """ Извлекает параметры из строки URL.

    Args:
        url (str): Строка URL для парсинга.

    Returns:
        dict | None: Словарь параметров запроса и их значений или `None`, если URL не содержит параметров.
    """
```

**Назначение**: Извлекает параметры запроса из URL-адреса.

**Параметры**:

-   `url` (str): URL-адрес, из которого требуется извлечь параметры.

**Возвращает**:

-   `dict | None`: Словарь, содержащий параметры запроса в виде пар ключ-значение. Если URL не содержит параметров, возвращается `None`. Если параметр имеет несколько значений, он возвращается в виде списка, иначе - в виде строки.

**Как работает функция**:

1.  URL-адрес передается в функцию.
2.  Функция использует `urlparse` для разбора URL на составные части.
3.  Извлекается строка запроса из разобранного URL.
4.  Строка запроса передается в `parse_qs` для преобразования в словарь параметров.
5.  Если словарь параметров не пуст, функция преобразует значения параметров из списка в строку, если параметр имеет только одно значение.
6.  Возвращается словарь параметров.

**ASCII flowchart**:

```
    URL адрес
     |
     urlparse(url)
     |
     Извлечение строки запроса
     |
     parse_qs(parsed_url.query)
     |
     Преобразование значений параметров
     |
     Возврат словаря параметров
```

**Примеры**:

```python
url_with_params = "https://example.com?param1=value1&param2=value2&param2=value3"
url_without_params = "https://example.com"

params_with = extract_url_params(url_with_params)
print(f"Параметры из URL: {params_with}")

params_without = extract_url_params(url_without_params)
print(f"Параметры из URL: {params_without}")

# Параметры из URL: {'param1': 'value1', 'param2': ['value2', 'value3']}
# URL не содержит параметров.
```

### `is_url`

```python
def is_url(text: str) -> bool:
    """ Проверяет, является ли переданный текст валидным URL с использованием библиотеки validators.

    Args:
        text (str): Строка для проверки.

    Returns:
        bool: `True` если строка является валидным URL, иначе `False`.
    """
```

**Назначение**: Проверяет, является ли строка валидным URL-адресом.

**Параметры**:

-   `text` (str): Строка, которую требуется проверить на соответствие формату URL.

**Возвращает**:

-   `bool`: `True`, если строка является валидным URL-адресом, иначе `False`.

**Как работает функция**:

1.  Строка передается в функцию.
2.  Функция использует `validators.url` для проверки строки на соответствие формату URL.
3.  Возвращается результат проверки.

**ASCII flowchart**:

```
    Строка для проверки
     |
     validators.url(text)
     |
     Возврат результата проверки
```

**Примеры**:

```python
valid_url = "https://example.com"
invalid_url = "not a url"

is_valid = is_url(valid_url)
print(f"URL '{valid_url}' валидный: {is_valid}")

is_invalid = is_url(invalid_url)
print(f"URL '{invalid_url}' валидный: {is_invalid}")

# URL 'https://example.com' валидный: True
# URL 'not a url' валидный: False
```

### `url_shortener`

```python
def url_shortener(long_url: str) -> str | None:
    """ Сокращает длинный URL с использованием сервиса TinyURL.

    Args:
        long_url (str): Длинный URL для сокращения.

    Returns:
        str | None: Сокращённый URL или `None`, если произошла ошибка.
    """
```

**Назначение**: Сокращает длинный URL-адрес с использованием сервиса TinyURL.

**Параметры**:

-   `long_url` (str): Длинный URL-адрес, который требуется сократить.

**Возвращает**:

-   `str | None`: Сокращенный URL-адрес или `None`, если произошла ошибка.

**Как работает функция**:

1.  Длинный URL-адрес передается в функцию.
2.  Формируется URL-адрес для запроса к API TinyURL.
3.  Выполняется GET-запрос к API TinyURL.
4.  Если запрос выполнен успешно (status\_code == 200), возвращается сокращенный URL-адрес из ответа.
5.  В случае ошибки возвращается `None`.

**ASCII flowchart**:

```
    Длинный URL
     |
     Формирование URL для API TinyURL
     |
     GET-запрос к API TinyURL
     |
     Проверка status_code
     |
     Возврат сокращенного URL или None
```

**Примеры**:

```python
long_url = "https://www.example.com/very/long/path/to/resource?param1=value1&param2=value2"

short_url = url_shortener(long_url)
print(f"Сокращенный URL: {short_url}")

# Сокращенный URL: http://tinyurl.com/yf3r5j