# Документация модуля нормализации данных

## Обзор

Модуль `normalizer` предоставляет функциональность для нормализации различных типов данных, включая строки, булевы значения, целые числа и числа с плавающей запятой. Он также включает вспомогательные функции для обработки текста.

## Подробнее

Этот модуль предоставляет набор инструментов для очистки и преобразования данных, что может быть полезно во многих сценариях, например, при обработке пользовательского ввода, подготовке данных для анализа или интеграции данных из различных источников. Он используется в проекте для стандартизации данных перед их дальнейшей обработкой или сохранением.

## Функции модуля

### `normalize_boolean`

```python
def normalize_boolean(input_data: Any) -> bool:
    """
    Преобразует входное значение в булево значение.

    Args:
        input_data (Any): Данные, которые могут представлять булево значение (строка, число, булев тип).

    Returns:
        bool: Преобразованное булево значение.

    Raises:
        Нет.

    Example:
        >>> normalize_boolean('yes')
        True
        >>> normalize_boolean(0)
        False
    """
```

**Назначение**: Преобразует различные типы данных в булево значение (True или False).

**Параметры**:
- `input_data` (Any): Входные данные, которые могут быть строкой, числом или булевым значением.

**Возвращает**:
- `bool`: Булево значение, соответствующее входным данным.

**Как работает функция**:
1. Функция принимает входные данные любого типа (`input_data`).
2. Проверяет тип данных и преобразует их в булево значение. Например, строка 'yes' преобразуется в True, число 0 преобразуется в False.

**Примеры**:

- Преобразование строки 'yes' в булево значение:

```python
normalize_boolean('yes') # Возвращает True
```

- Преобразование числа 0 в булево значение:

```python
normalize_boolean(0) # Возвращает False
```

### `normalize_string`

```python
def normalize_string(input_data: str | list) -> str:
    """
    Преобразует строку или список строк в нормализованную строку, удаляя лишние пробелы, HTML теги и специальные символы.

    Args:
        input_data (str | list): Строка или список строк.

    Returns:
        str: Очищенная строка в кодировке UTF-8.

    Raises:
        Нет.

    Example:
        >>> normalize_string(['  Example string  ', '<b>with HTML</b>'])
        'Example string with HTML'
    """
```

**Назначение**: Преобразует входные данные (строку или список строк) в нормализованную строку, удаляя лишние пробелы, HTML-теги и специальные символы.

**Параметры**:
- `input_data` (str | list): Строка или список строк, которые нужно нормализовать.

**Возвращает**:
- `str`: Нормализованная строка в кодировке UTF-8.

**Как работает функция**:
1. Функция принимает строку или список строк (`input_data`).
2. Если входные данные являются списком, объединяет их в одну строку.
3. Удаляет HTML-теги из строки.
4. Удаляет специальные символы из строки.
5. Удаляет лишние пробелы в начале и конце строки.

**Примеры**:

- Нормализация списка строк с HTML-тегами и пробелами:

```python
normalize_string(['  Example string  ', '<b>with HTML</b>']) # Возвращает 'Example string with HTML'
```

### `normalize_int`

```python
def normalize_int(input_data: str | int | float | Decimal) -> int:
    """
    Преобразует входное значение в целое число.

    Args:
        input_data (str | int | float | Decimal): Число или его строковое представление.

    Returns:
        int: Преобразованное целое число.

    Raises:
        Нет.

    Example:
        >>> normalize_int('42')
        42
        >>> normalize_int(3.14)
        3
    """
```

**Назначение**: Преобразует входное значение (строку, целое число, число с плавающей точкой или Decimal) в целое число.

**Параметры**:
- `input_data` (str | int | float | Decimal): Число или его строковое представление.

**Возвращает**:
- `int`: Преобразованное целое число.

**Как работает функция**:
1. Функция принимает входные данные, которые могут быть строкой, целым числом, числом с плавающей точкой или Decimal (`input_data`).
2. Преобразует входные данные в целое число. Если входные данные являются числом с плавающей точкой, дробная часть отбрасывается.

**Примеры**:

- Преобразование строки '42' в целое число:

```python
normalize_int('42') # Возвращает 42
```

- Преобразование числа с плавающей точкой 3.14 в целое число:

```python
normalize_int(3.14) # Возвращает 3
```

### `normalize_float`

```python
def normalize_float(value: Any) -> float | List[float] | None:
    """
    Преобразует входное значение в число с плавающей запятой.

    Args:
        value (Any): Число, строка или список чисел.

    Returns:
        float | List[float] | None: Число с плавающей запятой, список чисел с плавающей запятой или `None` в случае ошибки.

    Raises:
        Нет.

    Example:
        >>> normalize_float('3.14')
        3.14
        >>> normalize_float([1, '2.5', 3])
        [1.0, 2.5, 3.0]
    """
```

**Назначение**: Преобразует входное значение в число с плавающей запятой.

**Параметры**:
- `value` (Any): Число, строка или список чисел.

**Возвращает**:
- `float | List[float] | None`: Число с плавающей запятой, список чисел с плавающей запятой или `None` в случае ошибки.

**Как работает функция**:
1. Функция принимает входные данные, которые могут быть числом, строкой или списком чисел (`value`).
2. Преобразует входные данные в число с плавающей запятой. Если входные данные являются списком, преобразует каждый элемент списка в число с плавающей запятой.

**Примеры**:

- Преобразование строки '3.14' в число с плавающей запятой:

```python
normalize_float('3.14') # Возвращает 3.14
```

- Преобразование списка, содержащего числа и строки, в список чисел с плавающей запятой:

```python
normalize_float([1, '2.5', 3]) # Возвращает [1.0, 2.5, 3.0]
```

### `remove_line_breaks`

```python
def remove_line_breaks(input_str: str) -> str:
    """
    Удаляет символы новой строки из строки.

    Args:
        input_str (str): Входная строка.

    Returns:
        str: Строка без символов новой строки.

    Raises:
        Нет.

    Example:
        >>> remove_line_breaks('String\\nwith line breaks\\r')
        'String with line breaks'
    """
```

**Назначение**: Удаляет символы новой строки (\n и \r) из входной строки.

**Параметры**:
- `input_str` (str): Входная строка, из которой нужно удалить символы новой строки.

**Возвращает**:
- `str`: Строка без символов новой строки.

**Как работает функция**:
1. Функция принимает входную строку (`input_str`).
2. Удаляет все символы новой строки (\n и \r) из строки.

**Примеры**:

- Удаление символов новой строки из строки:

```python
remove_line_breaks('String\nwith line breaks\r') # Возвращает 'String with line breaks'
```

### `remove_html_tags`

```python
def remove_html_tags(input_html: str) -> str:
    """
    Удаляет HTML теги из строки.

    Args:
        input_html (str): Входная строка с HTML тегами.

    Returns:
        str: Строка без HTML тегов.

    Raises:
        Нет.

    Example:
        >>> remove_html_tags('<p>Example text</p>')
        'Example text'
    """
```

**Назначение**: Удаляет HTML-теги из входной строки.

**Параметры**:
- `input_html` (str): Входная строка, содержащая HTML-теги.

**Возвращает**:
- `str`: Строка без HTML-тегов.

**Как работает функция**:
1. Функция принимает входную строку, содержащую HTML-теги (`input_html`).
2. Использует регулярное выражение для удаления всех HTML-тегов из строки.

**Примеры**:

- Удаление HTML-тегов из строки:

```python
remove_html_tags('<p>Example text</p>') # Возвращает 'Example text'
```

### `remove_special_characters`

```python
def remove_special_characters(input_str: str | list) -> str | list:
    """
    Удаляет специальные символы из строки или списка строк.

    Args:
        input_str (str | list): Строка или список строк.

    Returns:
        str | list: Строка или список строк без специальных символов.

    Raises:
        Нет.

    Example:
        >>> remove_special_characters('Hello@World!')
        'HelloWorld'
    """
```

**Назначение**: Удаляет специальные символы из входной строки или списка строк.

**Параметры**:
- `input_str` (str | list): Входная строка или список строк, из которых нужно удалить специальные символы.

**Возвращает**:
- `str | list`: Строка или список строк без специальных символов.

**Как работает функция**:
1. Функция принимает входные данные, которые могут быть строкой или списком строк (`input_str`).
2. Если входные данные являются строкой, удаляет все специальные символы из строки.
3. Если входные данные являются списком, удаляет все специальные символы из каждой строки в списке.

**Примеры**:

- Удаление специальных символов из строки:

```python
remove_special_characters('Hello@World!') # Возвращает 'HelloWorld'
```

### `normalize_sql_date`

```python
def normalize_sql_date(input_data: str | datetime) -> str:
    """
    Преобразует строку или объект `datetime` в стандартный формат SQL даты (`YYYY-MM-DD`).

    Args:
        input_data (str | datetime): Строка или объект `datetime`, представляющий дату.

    Returns:
        str: Нормализованная дата в формате строки `YYYY-MM-DD`.

    Raises:
        Нет.

    Example:
        >>> normalize_sql_date('2024-12-06')
        '2024-12-06'
        >>> normalize_sql_date(datetime(2024, 12, 6))
        '2024-12-06'
    """
```

**Назначение**: Преобразует входные данные (строку или объект datetime) в строку, представляющую дату в формате SQL (`YYYY-MM-DD`).

**Параметры**:
- `input_data` (str | datetime): Входные данные, которые могут быть строкой или объектом datetime, представляющим дату.

**Возвращает**:
- `str`: Дата в формате `YYYY-MM-DD`.

**Как работает функция**:
1. Функция принимает входные данные, которые могут быть строкой или объектом datetime (`input_data`).
2. Если входные данные являются строкой, проверяет, соответствует ли она формату `YYYY-MM-DD`.
3. Если входные данные являются объектом datetime, преобразует его в строку в формате `YYYY-MM-DD`.

**Примеры**:

- Преобразование строки в формат SQL-даты:

```python
normalize_sql_date('2024-12-06') # Возвращает '2024-12-06'
```

- Преобразование объекта datetime в формат SQL-даты:

```python
normalize_sql_date(datetime(2024, 12, 6)) # Возвращает '2024-12-06'
```

## Пример использования

```python
from src.utils.string.normalizer import normalize_string, normalize_boolean, normalize_int, normalize_float, normalize_sql_date

# Нормализация строки
clean_str = normalize_string(['<h1>Header</h1>', '  text with spaces  '])
print(clean_str)  # 'Header text with spaces'

# Нормализация булевого значения
is_active = normalize_boolean('Yes')
print(is_active)  # True

# Нормализация целого числа
integer_value = normalize_int('42')
print(integer_value)  # 42

# Нормализация числа с плавающей запятой
float_value = normalize_float('3.14159')
print(float_value)  # 3.14159

# Нормализация SQL даты
sql_date = normalize_sql_date('2024-12-06')
print(sql_date)  # '2024-12-06'
```

## Требования

- Python 3.10 или выше.
- Модуль `src.logger` для логирования.

## Логирование

Все ошибки и предупреждения записываются через `logger`:
- Ошибки записываются с использованием `logger.error`.
- Неожиданные значения записываются с использованием `logger.debug` или `logger.warning`.