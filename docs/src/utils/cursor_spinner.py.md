# Модуль `cursor_spinner`

## Обзор

Модуль `cursor_spinner` предоставляет утилиту для отображения вращающегося курсора в консоли, чтобы имитировать процесс загрузки или ожидания. Он содержит функции для генерации символов вращающегося курсора и отображения его в течение заданного времени.

## Подробней

Модуль предназначен для использования в консольных приложениях, где необходимо визуально показать пользователю, что программа выполняет какую-то операцию в фоновом режиме и не зависла. Это может быть полезно, например, при загрузке данных, выполнении сложных вычислений или ожидании ответа от сети.

## Функции

### `spinning_cursor`

```python
def spinning_cursor():
    """ Generator for a spinning cursor that cycles through |, /, -, \\ symbols.
    
    Yields:
        str: The next symbol in the cursor sequence.
    
    Example:
        >>> cursor = spinning_cursor()
        >>> next(cursor)  # '|'
        >>> next(cursor)  # '/'
        >>> next(cursor)  # '-'
        >>> next(cursor)  # '\\'
    """
    ...
```

**Назначение**: Генератор для вращающегося курсора, который циклически переключается между символами |, /, -, \.

**Параметры**:
- Нет.

**Возвращает**:
- `str`: Следующий символ в последовательности курсора.

**Как работает функция**:

Функция `spinning_cursor` - это генератор, который при каждом вызове `next()` возвращает следующий символ из последовательности `|/-\`. Генератор зацикливается, обеспечивая бесконечную последовательность символов для вращения курсора.

1.  **Инициализация**: Функция входит в бесконечный цикл `while True:`.
2.  **Итерация по символам**: Для каждого символа в строке `'|/-\\'` выполняется итерация.
3.  **Генерация символа**: С помощью `yield cursor` функция возвращает текущий символ и приостанавливает свое выполнение до следующего вызова `next()`.
4.  **Повторение**: После прохождения всех символов цикл начинается снова, обеспечивая непрерывное вращение курсора.

```mermaid
graph LR
A[Начало] --> B{Цикл while True};
B --> C{Цикл for cursor in '|/-\\'};
C --> D[yield cursor];
D --> C;
C --> B;
```

**Примеры**:

```python
>>> cursor = spinning_cursor()
>>> next(cursor)
'|'
>>> next(cursor)
'/'
>>> next(cursor)
'-'
>>> next(cursor)
'\\'
```

### `show_spinner`

```python
def show_spinner(duration: float = 5.0, delay: float = 0.1):
    """ Shows a spinning cursor in the console for a specified duration.
    
    Args:
        duration (float): How long the spinner should run (in seconds). Defaults to 5.0.
        delay (float): Delay between each spin (in seconds). Defaults to 0.1.
    
    Example:
        >>> show_spinner(duration=3.0, delay=0.2)  # Shows a spinner for 3 seconds
    """
    ...
```

**Назначение**: Отображает вращающийся курсор в консоли в течение заданного времени.

**Параметры**:
- `duration` (float): Как долго должен работать спиннер (в секундах). По умолчанию 5.0.
- `delay` (float): Задержка между каждым вращением (в секундах). По умолчанию 0.1.

**Как работает функция**:

Функция `show_spinner` отображает вращающийся курсор в консоли в течение заданного времени. Она использует генератор `spinning_cursor` для получения символов курсора, выводит их в консоль с заданной задержкой и затем удаляет предыдущий символ, чтобы создать эффект вращения.

1.  **Инициализация генератора**: Создается экземпляр генератора `spinning_cursor()`.
2.  **Определение времени окончания**: Вычисляется время окончания работы спиннера на основе текущего времени и заданной продолжительности `duration`.
3.  **Цикл отображения спиннера**: Пока текущее время меньше времени окончания, выполняется следующий цикл:
    *   **Вывод символа**: С помощью `sys.stdout.write(next(spinner))` выводится следующий символ из генератора `spinning_cursor`.
    *   **Сброс буфера вывода**: `sys.stdout.flush()` принудительно отправляет данные в консоль.
    *   **Задержка**: `time.sleep(delay)` приостанавливает выполнение на заданное время `delay`.
    *   **Удаление символа**: `sys.stdout.write('\b')` выводит символ backspace, который удаляет предыдущий символ из консоли.

```mermaid
graph LR
A[Начало] --> B[spinner = spinning_cursor()];
B --> C[end_time = time.time() + duration];
C --> D{Цикл while time.time() < end_time};
D --> E[sys.stdout.write(next(spinner))];
E --> F[sys.stdout.flush()];
F --> G[time.sleep(delay)];
G --> H[sys.stdout.write('\b')];
H --> D;
D -- Нет --> I[Конец];
```

**Примеры**:

```python
>>> show_spinner(duration=3.0, delay=0.2)  # Отображает спиннер в течение 3 секунд